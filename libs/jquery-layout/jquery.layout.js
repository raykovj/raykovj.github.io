/*
 * jquery.layout 1.2.0
 *
 * Copyright (c) 2008 
 *   Fabrizio Balliano (http://www.fabrizioballiano.net)
 *   Kevin Dalman (http://allpro.net)
 *
 * Dual licensed under the GPL (http://www.gnu.org/licenses/gpl.html)
 * and MIT (http://www.opensource.org/licenses/mit-license.php) licenses.
 *
 * $Date: 2008-12-27 02:17:22 +0100 (sab, 27 dic 2008) $
 * $Rev: 203 $
 * 
 * NOTE: For best code readability, view this with a fixed-space font and tabs equal to 4-chars
 */

!function($){$.fn.layout=function(opts){function keyDown(e){if(!e)return!0;var s=e.keyCode;if(s<33)return!0;var t,i,o,n,a,r={38:"north",40:"south",37:"west",39:"east"},l=s>=37&&s<=40,d=(e.altKey,e.shiftKey),f=e.ctrlKey,p=!1;return!f&&!d||(l&&options[r[s]].enableCursorHotkey?p=r[s]:$.each(c.borderPanes.split(","),function(e,t){if(i=options[t],o=i.customHotkey,n=i.customHotkeyModifier,(d&&"SHIFT"==n||f&&"CTRL"==n||f&&d)&&o&&s==(isNaN(o)||o<=9?o.toUpperCase().charCodeAt(0):o))return p=t,!1}),!p||(i=options[p],t=state[p],!(i.enableCursorHotkey&&!t.isHidden&&$Ps[p])||(!(!((a=e.target||e.srcElement)&&d&&l)||"TEXTAREA"!=a.tagName&&("INPUT"!=a.tagName||37!=s&&39!=s))||(toggle(p),e.stopPropagation(),e.returnValue=!1,!1))))}function allowOverflow(e){this&&this.tagName&&(e=this);var s;if(s="string"==typeof e?$Ps[e]:$(e).attr("pane")?$(e):$(e).parents("div[pane]:first"),s.length){var t=s.attr("pane"),i=state[t];if(i.cssSaved&&resetOverflow(t),i.isSliding||i.isResizing||i.isClosed)return void(i.cssSaved=!1);var o={zIndex:c.zIndex.pane_normal+1},n={},a=s.css("overflow"),r=s.css("overflowX"),l=s.css("overflowY");"visible"!=a&&(n.overflow=a,o.overflow="visible"),r&&"visible"!=r&&"auto"!=r&&(n.overflowX=r,o.overflowX="visible"),l&&"visible"!=l&&"auto"!=l&&(n.overflowY=r,o.overflowY="visible"),i.cssSaved=n,s.css(o),$.each(c.allPanes.split(","),function(e,s){s!=t&&resetOverflow(s)})}}function resetOverflow(e){this&&this.tagName&&(e=this);var s;if(s="string"==typeof e?$Ps[e]:$(e).hasClass("ui-layout-pane")?$(e):$(e).parents("div[pane]:first"),s.length){var t=s.attr("pane"),i=state[t],o=i.cssSaved||{};i.isSliding||i.isResizing||s.css("zIndex",c.zIndex.pane_normal),s.css(o),i.cssSaved=!1}}function getBtn(e,s,t){var i=$(e),o="Error Adding Button \n\nInvalid ";if(i.length){if(-1!=c.borderPanes.indexOf(s)){var n=options[s].buttonClass+"-"+t;return i.addClass(n+" "+n+"-"+s),i}alert(o+"pane: "+s)}else alert(o+"selector: "+e);return!1}function addToggleBtn(e,s){var t=getBtn(e,s,"toggle");t&&t.attr("title",state[s].isClosed?"Open":"Close").click(function(e){toggle(s),e.stopPropagation()})}function addOpenBtn(e,s){var t=getBtn(e,s,"open");t&&t.attr("title","Open").click(function(e){open(s),e.stopPropagation()})}function addCloseBtn(e,s){var t=getBtn(e,s,"close");t&&t.attr("title","Close").click(function(e){close(s),e.stopPropagation()})}function addPinBtn(e,s){var t=getBtn(e,s,"pin");if(t){var i=state[s];t.click(function(e){setPinState($(this),s,i.isSliding||i.isClosed),i.isSliding||i.isClosed?open(s):close(s),e.stopPropagation()}),setPinState(t,s,!i.isClosed&&!i.isSliding),c[s].pins.push(e)}}function syncPinBtns(e,s){$.each(c[e].pins,function(t,i){setPinState($(i),e,s)})}function setPinState(e,s,t){var i=e.attr("pin");if(!i||t!=("down"==i)){var o=options[s].buttonClass,n=o+"-pin",a=n+"-"+s,r=n+"-up",l=a+"-up",c=n+"-down",d=a+"-down";e.attr("pin",t?"down":"up").attr("title",t?"Un-Pin":"Pin").removeClass(t?r:c).removeClass(t?l:d).addClass(t?c:r).addClass(t?d:l)}}var prefix="ui-layout-",defaults={paneClass:prefix+"pane",resizerClass:prefix+"resizer",togglerClass:prefix+"toggler",togglerInnerClass:prefix+"",buttonClass:prefix+"button",contentSelector:"."+prefix+"content",contentIgnoreSelector:"."+prefix+"ignore"},options={name:"",scrollToBookmarkOnLoad:!0,defaults:{applyDefaultStyles:!1,closable:!0,resizable:!0,slidable:!0,contentSelector:defaults.contentSelector,contentIgnoreSelector:defaults.contentIgnoreSelector,paneClass:defaults.paneClass,resizerClass:defaults.resizerClass,togglerClass:defaults.togglerClass,buttonClass:defaults.buttonClass,resizerDragOpacity:1,maskIframesOnResize:!0,minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerTip_open:"Close",togglerTip_closed:"Open",resizerTip:"Resize",sliderTip:"Slide Open",sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseout",hideTogglerOnSlide:!1,togglerContent_open:"",togglerContent_closed:"",showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},initClosed:!1,initHidden:!1},north:{paneSelector:"."+prefix+"north",size:"auto",resizerCursor:"n-resize"},south:{paneSelector:"."+prefix+"south",size:"auto",resizerCursor:"s-resize"},east:{paneSelector:"."+prefix+"east",size:200,resizerCursor:"e-resize"},west:{paneSelector:"."+prefix+"west",size:200,resizerCursor:"w-resize"},center:{paneSelector:"."+prefix+"center"}},effects={slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},scale:{all:{duration:"fast"}}},config={allPanes:"north,south,east,west,center",borderPanes:"north,south,east,west",zIndex:{resizer_normal:1,pane_normal:2,mask:4,sliding:100,resizing:1e4,animation:1e4},resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden",zIndex:1},cssDef:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDef:{background:"#AAA"}},content:{cssReq:{overflow:"auto"},cssDef:{}},defaults:{cssReq:{position:"absolute",margin:0,zIndex:2},cssDef:{padding:"10px",background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{edge:"top",sizeType:"height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{edge:"bottom",sizeType:"height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{edge:"right",sizeType:"width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{edge:"left",sizeType:"width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},state={id:Math.floor(1e4*Math.random()),container:{},north:{},south:{},east:{},west:{},center:{}},altEdge={top:"bottom",bottom:"top",left:"right",right:"left"},altSide={north:"south",south:"north",east:"west",west:"east"},isStr=function(e){if("string"==typeof e)return!0;if("object"==typeof e)try{return null!==e.constructor.toString().match(/string/i)}catch(e){}return!1},str=function(e){return"string"==typeof e||isStr(e)?$.trim(e):e},min=function(e,s){return Math.min(e,s)},max=function(e,s){return Math.max(e,s)},transformData=function(e){var s={defaults:{fxSettings:{}},north:{fxSettings:{}},south:{fxSettings:{}},east:{fxSettings:{}},west:{fxSettings:{}},center:{fxSettings:{}}};return e=e||{},e.effects||e.defaults||e.north||e.south||e.west||e.east||e.center?s=$.extend(s,e):$.each(e,function(e,t){a=e.split("__"),s[a[1]?a[0]:"defaults"][a[1]?a[1]:a[0]]=t}),s},setFlowCallback=function(e,s,t){function i(e,t){o=c[e],o.doCallback?(cpPane=o.callback.split(",")[1],cpPane!=e&&cpPane!=s&&i(cpPane,!0)):(o.doCallback=!0,o.callback=n)}var o,n=e+","+s+","+(t?1:0);$.each(c.borderPanes.split(","),function(e,s){if(c[s].isMoving)return i(s),!1})},execFlowCallback=function(e){var s=c[e];if(c.isLayoutBusy=!1,delete s.isMoving,s.doCallback&&s.callback){s.doCallback=!1;var t=s.callback.split(","),i=t[2]>0;"open"==t[0]?open(t[1],i):"close"==t[0]&&close(t[1],i),s.doCallback||(s.callback=null)}},execUserCallback=function(pane,v_fn){if(v_fn){var fn;try{if("function"==typeof v_fn)fn=v_fn;else{if("string"!=typeof v_fn)return;if(v_fn.indexOf(",")>0){var args=v_fn.split(","),fn=eval(args[0]);if("function"==typeof fn&&args.length>1)return fn(args[1])}else fn=eval(v_fn)}if("function"==typeof fn)return fn(pane,$Ps[pane],$.extend({},state[pane]),$.extend({},options[pane]),options.name)}catch(e){}}},cssNum=function(e,s){var t=0,i=!1,o="";return $.browser.msie||"none"==$.curCSS(e[0],"display",!0)&&(i=!0,o=$.curCSS(e[0],"visibility",!0),e.css({display:"block",visibility:"hidden"})),t=parseInt($.curCSS(e[0],s,!0),10)||0,i&&(e.css({display:"none"}),o&&"hidden"!=o&&e.css({visibility:o})),t},cssW=function(e,s){var t;return isStr(e)?(e=str(e),t=$Ps[e]):t=$(e),s<=0?0:(s>0||(s=isStr(e)?getPaneSize(e):t.outerWidth()),$.boxModel?s-cssNum(t,"paddingLeft")-cssNum(t,"paddingRight")-("none"==$.curCSS(t[0],"borderLeftStyle",!0)?0:cssNum(t,"borderLeftWidth"))-("none"==$.curCSS(t[0],"borderRightStyle",!0)?0:cssNum(t,"borderRightWidth")):s)},cssH=function(e,s){var t;return isStr(e)?(e=str(e),t=$Ps[e]):t=$(e),s<=0?0:(s>0||(s=isStr(e)?getPaneSize(e):t.outerHeight()),$.boxModel?s-cssNum(t,"paddingTop")-cssNum(t,"paddingBottom")-("none"==$.curCSS(t[0],"borderTopStyle",!0)?0:cssNum(t,"borderTopWidth"))-("none"==$.curCSS(t[0],"borderBottomStyle",!0)?0:cssNum(t,"borderBottomWidth")):s)},cssSize=function(e,s){return"horz"==c[e].dir?cssH(e,s):cssW(e,s)},getPaneSize=function(e,s){var t=$Ps[e],i=options[e],o=state[e],n=s?i.spacing_open:0,a=s?i.spacing_closed:0;return!t||o.isHidden?0:o.isClosed||o.isSliding&&s?a:"horz"==c[e].dir?t.outerHeight()+n:t.outerWidth()+n},setPaneMinMaxSizes=function(e){var s,t,i=cDims,o=(c[e].edge,c[e].dir),n=options[e],a=state[e],r=($Ps[e],$Ps[altSide[e]]),l=n.spacing_open,d=options[altSide[e]].spacing_open,f=r?"horz"==o?r.outerHeight():r.outerWidth():0,p="horz"==o?i.innerHeight:i.innerWidth,u=p-l-f-d,g=a.minSize||0,h=Math.min(a.maxSize||9999,u);switch(e){case"north":s=i.offsetTop+g,t=i.offsetTop+h;break;case"west":s=i.offsetLeft+g,t=i.offsetLeft+h;break;case"south":s=i.offsetTop+i.innerHeight-h,t=i.offsetTop+i.innerHeight-g;break;case"east":s=i.offsetLeft+i.innerWidth-h,t=i.offsetLeft+i.innerWidth-g}$.extend(a,{minSize:g,maxSize:h,minPosition:s,maxPosition:t})},getPaneDims=function(){var d={top:getPaneSize("north",!0),bottom:getPaneSize("south",!0),left:getPaneSize("west",!0),right:getPaneSize("east",!0),width:0,height:0};with(d)width=cDims.innerWidth-left-right,height=cDims.innerHeight-bottom-top,top+=cDims.top,bottom+=cDims.bottom,left+=cDims.left,right+=cDims.right;return d},getElemDims=function(e){var s,t,i,o={};return $.each("Left,Right,Top,Bottom".split(","),function(){s=str(this),t=o["border"+s]=cssNum(e,"border"+s+"Width"),i=o["padding"+s]=cssNum(e,"padding"+s),o["offset"+s]=t+i,e==$Container&&(o[s.toLowerCase()]=$.boxModel?i:0)}),o.innerWidth=o.outerWidth=e.outerWidth(),o.innerHeight=o.outerHeight=e.outerHeight(),$.boxModel&&(o.innerWidth-=o.offsetLeft+o.offsetRight,o.innerHeight-=o.offsetTop+o.offsetBottom),o},setTimer=function(e,s,t,i){var o=window.layout=window.layout||{},n=o.timers=o.timers||{},a="layout_"+state.id+"_"+e+"_"+s;n[a]||(n[a]=setTimeout(t,i))},clearTimer=function(e,s){var t=window.layout=window.layout||{},i=t.timers=t.timers||{},o="layout_"+state.id+"_"+e+"_"+s;return!!i[o]&&(clearTimeout(i[o]),delete i[o],!0)},create=function(){if(initOptions(),initContainer(),initPanes(),initHandles(),initResizable(),sizeContent("all"),options.scrollToBookmarkOnLoad)with(self.location)hash&&replace(hash);initHotkeys(),$(window).resize(function(){var e="timerLayout_"+state.id;window[e]&&clearTimeout(window[e]),window[e]=null,window[e]=setTimeout(resizeAll,100)})},initContainer=function(){try{if("BODY"==$Container[0].tagName)$("html").css({height:"100%",overflow:"hidden"}),$("body").css({position:"relative",height:"100%",overflow:"hidden",margin:0,padding:0,border:"none"});else{var e={overflow:"hidden"},s=$Container.css("position"),t=$Container.css("height");$Container.hasClass("ui-layout-pane")||((!s||"fixed,absolute,relative".indexOf(s)<0)&&(e.position="relative"),t&&"auto"!=t||(e.height="100%")),$Container.css(e)}}catch(e){}cDims=state.container=getElemDims($Container)},initHotkeys=function(){$.each(c.borderPanes.split(","),function(e,s){var t=options[s];if(t.enableCursorHotkey||t.customHotkey)return $(document).keydown(keyDown),!1})},initOptions=function(){opts=transformData(opts),opts.effects&&($.extend(effects,opts.effects),delete opts.effects),$.each("name,scrollToBookmarkOnLoad".split(","),function(e,s){void 0!==opts[s]?options[s]=opts[s]:void 0!==opts.defaults[s]&&(options[s]=opts.defaults[s],delete opts.defaults[s])}),$.each("paneSelector,resizerCursor,customHotkey".split(","),function(e,s){delete opts.defaults[s]}),$.extend(options.defaults,opts.defaults),c.center=$.extend(!0,{},c.defaults,c.center),$.extend(options.center,opts.center);var e=$.extend(!0,{},options.defaults,opts.defaults,options.center);$.each("paneClass,contentSelector,contentIgnoreSelector,applyDefaultStyles,showOverflowOnHover".split(","),function(s,t){options.center[t]=e[t]});var s=options.defaults;$.each(c.borderPanes.split(","),function(e,t){c[t]=$.extend(!0,{},c.defaults,c[t]),o=options[t]=$.extend(!0,{},options.defaults,options[t],opts.defaults,opts[t]),o.paneClass||(o.paneClass=defaults.paneClass),o.resizerClass||(o.resizerClass=defaults.resizerClass),o.togglerClass||(o.togglerClass=defaults.togglerClass),$.each(["_open","_close",""],function(e,i){var n="fxName"+i,a="fxSpeed"+i,r="fxSettings"+i;o[n]=opts[t][n]||opts[t].fxName||opts.defaults[n]||opts.defaults.fxName||o[n]||o.fxName||s[n]||s.fxName||"none";var l=o[n];"none"!=l&&$.effects&&$.effects[l]&&(effects[l]||o[r]||o.fxSettings)||(l=o[n]="none");var c=effects[l]||{},d=c.all||{},f=c[t]||{};o[r]=$.extend({},d,f,s.fxSettings||{},s[r]||{},o.fxSettings,o[r],opts.defaults.fxSettings,opts.defaults[r]||{},opts[t].fxSettings,opts[t][r]||{}),o[a]=opts[t][a]||opts[t].fxSpeed||opts.defaults[a]||opts.defaults.fxSpeed||o[a]||o[r].duration||o.fxSpeed||o.fxSettings.duration||s.fxSpeed||s.fxSettings.duration||f.duration||d.duration||"normal"})})},initPanes=function(){$.each(c.allPanes.split(","),function(){var e,s,t=str(this),i=options[t],o=state[t],n=(o.fx,c[t].dir),a="auto"==i.size||isNaN(i.size)?0:i.size,r=i.minSize||1,l=i.maxSize||9999,d=i.spacing_open||0,f=i.paneSelector,p=($.browser.msie&&$.browser.version,{});if($Cs[t]=!1,"#"===f.substr(0,1)?e=$Ps[t]=$Container.find(f+":first"):(e=$Ps[t]=$Container.children(f+":first"),e.length||(e=$Ps[t]=$Container.children("form:first").children(f+":first"))),!e.length)return $Ps[t]=!1,!0;switch(e.attr("pane",t).addClass(i.paneClass+" "+i.paneClass+"-"+t),"center"!=t&&(o.isClosed=!1,o.isSliding=!1,o.isResizing=!1,o.isHidden=!1,o.noRoom=!1,c[t].pins=[]),p=$.extend({visibility:"visible",display:"block"},c.defaults.cssReq,c[t].cssReq),i.applyDefaultStyles&&$.extend(p,c.defaults.cssDef,c[t].cssDef),e.css(p),p={},t){case"north":p.top=cDims.top,p.left=cDims.left,p.right=cDims.right;break;case"south":p.bottom=cDims.bottom,p.left=cDims.left,p.right=cDims.right;break;case"west":p.left=cDims.left;break;case"east":p.right=cDims.right}if("horz"==n?(0!==a&&"auto"!=a||(e.css({height:"auto"}),a=e.outerHeight()),a=max(a,r),a=min(a,l),a=min(a,cDims.innerHeight-d),p.height=max(1,cssH(t,a)),o.size=a,o.maxSize=l,o.minSize=max(r,a-p.height+1),e.css(p)):"vert"==n?(0!==a&&"auto"!=a||(e.css({width:"auto",float:"left"}),a=e.outerWidth(),e.css({float:"none"})),a=max(a,r),a=min(a,l),a=min(a,cDims.innerWidth-d),p.width=max(1,cssW(t,a)),o.size=a,o.maxSize=l,o.minSize=max(r,a-p.width+1),e.css(p),sizeMidPanes(t,null,!0)):"center"==t&&(e.css(p),sizeMidPanes("center",null,!0)),i.initClosed&&i.closable?(e.hide().addClass("closed"),o.isClosed=!0):i.initHidden||i.initClosed?(hide(t,!0),o.isHidden=!0):e.addClass("open"),i.showOverflowOnHover&&e.hover(allowOverflow,resetOverflow),i.contentSelector){if(s=$Cs[t]=e.children(i.contentSelector+":first"),!s.length)return $Cs[t]=!1,!0;s.css(c.content.cssReq),i.applyDefaultStyles&&s.css(c.content.cssDef),e.css({overflow:"hidden"})}})},initHandles=function(){$.each(c.borderPanes.split(","),function(){var e=str(this),s=options[e],t=state[e],i=s.resizerClass,o=s.togglerClass,n=$Ps[e];if($Rs[e]=!1,$Ts[e]=!1,n&&(s.closable||s.resizable)){var a,r,l=c[e].edge,d=n.is(":visible"),f=(d?s.spacing_open:s.spacing_closed,"-"+e),p=d?"-open":"-closed";a=$Rs[e]=$("<span></span>"),d&&s.resizable||!d&&s.slidable&&a.attr("title",s.sliderTip).css("cursor",s.sliderCursor),a.attr("id","#"==s.paneSelector.substr(0,1)?s.paneSelector.substr(1)+"-resizer":"").attr("resizer",e).css(c.resizers.cssReq).css(l,cDims[l]+getPaneSize(e)).addClass(i+" "+i+f+" "+i+p+" "+i+f+p).appendTo($Container),s.applyDefaultStyles&&a.css(c.resizers.cssDef),s.closable&&(r=$Ts[e]=$("<div></div>"),r.attr("id","#"==s.paneSelector.substr(0,1)?s.paneSelector.substr(1)+"-toggler":"").css(c.togglers.cssReq).attr("title",d?s.togglerTip_open:s.togglerTip_closed).click(function(s){toggle(e),s.stopPropagation()}).mouseover(function(e){e.stopPropagation()}).addClass(o+" "+o+f+" "+o+p+" "+o+f+p).appendTo(a),s.togglerContent_open&&$("<span>"+s.togglerContent_open+"</span>").addClass("content content-open").css("display",t.isClosed?"none":"block").appendTo(r),s.togglerContent_closed&&$("<span>"+s.togglerContent_closed+"</span>").addClass("content content-closed").css("display",t.isClosed?"block":"none").appendTo(r),s.applyDefaultStyles&&r.css(c.togglers.cssDef),d||bindStartSlidingEvent(e,!0))}}),sizeHandles("all",!0)},initResizable=function(){var e,s="function"==typeof $.fn.draggable;$.each(c.borderPanes.split(","),function(){var t=str(this),i=options[t],o=state[t];if(!s||!$Ps[t]||!i.resizable)return i.resizable=!1,!0;var n=i.resizerClass,a=n+"-drag",r=n+"-"+t+"-drag",l=n+"-dragging",d=n+"-"+t+"-dragging",f=!1,p=($Ps[t],$Rs[t]);o.isClosed||p.attr("title",i.resizerTip).css("cursor",i.resizerCursor),p.draggable({containment:$Container[0],axis:"horz"==c[t].dir?"y":"x",delay:200,distance:1,helper:"clone",opacity:i.resizerDragOpacity,zIndex:c.zIndex.resizing,start:function(s,n){if(!1===execUserCallback(t,i.onresize_start))return!1;o.isResizing=!0,clearTimer(t,"closeSlider"),p.addClass(a+" "+r),f=!1;var l="east"==t||"south"==t?i.spacing_open:0;setPaneMinMaxSizes(t),o.minPosition-=l,o.maxPosition-=l,e="horz"==c[t].dir?"top":"left",$(!0===i.maskIframesOnResize?"iframe":i.maskIframesOnResize).each(function(){$('<div class="ui-layout-mask"/>').css({background:"#fff",opacity:"0.001",zIndex:9,position:"absolute",width:this.offsetWidth+"px",height:this.offsetHeight+"px"}).css($(this).offset()).appendTo(this.parentNode)})},drag:function(s,i){f||($(".ui-draggable-dragging").addClass(l+" "+d).children().css("visibility","hidden"),f=!0,o.isSliding&&$Ps[t].css("zIndex",c.zIndex.sliding)),i.position[e]<o.minPosition?i.position[e]=o.minPosition:i.position[e]>o.maxPosition&&(i.position[e]=o.maxPosition)},stop:function(e,s){var i,n,l=s.position;switch(p.removeClass(a+" "+r),t){case"north":i=l.top;break;case"west":i=l.left;break;case"south":i=cDims.outerHeight-l.top-p.outerHeight();break;case"east":i=cDims.outerWidth-l.left-p.outerWidth()}n=i-cDims[c[t].edge],sizePane(t,n),$("div.ui-layout-mask").remove(),o.isResizing=!1}})})},hide=function(e,s){var t=options[e],i=state[e],o=$Ps[e],n=$Rs[e];o&&!i.isHidden&&!1!==execUserCallback(e,t.onhide_start)&&(i.isSliding=!1,n&&n.hide(),s||i.isClosed?(i.isClosed=!0,i.isHidden=!0,o.hide(),sizeMidPanes("horz"==c[e].dir?"all":"center"),execUserCallback(e,t.onhide_end||t.onhide)):(i.isHiding=!0,close(e,!1)))},show=function(e,s){var t=options[e],i=state[e],o=$Ps[e],n=$Rs[e];o&&i.isHidden&&!1!==execUserCallback(e,t.onshow_start)&&(i.isSliding=!1,i.isShowing=!0,n&&t.spacing_open>0&&n.show(),!1===s?close(e,!0):open(e))},toggle=function(e){var s=state[e];s.isHidden?show(e):s.isClosed?open(e):close(e)},close=function(e,s,t){function i(){bindStartSlidingEvent(e,!0),h||execUserCallback(e,r.onclose_end||r.onclose),h&&execUserCallback(e,r.onshow_end||r.onshow),m&&execUserCallback(e,r.onhide_end||r.onhide),execFlowCallback(e)}var o=$Ps[e],n=$Rs[e],a=$Ts[e],r=options[e],l=state[e],d=!t&&!l.isClosed&&"none"!=r.fxName_close,f=c[e].edge,p=r.resizerClass,u=r.togglerClass,g="-"+e,h=l.isShowing,m=l.isHiding;if(delete l.isShowing,delete l.isHiding,o&&(r.resizable||r.closable)&&(s||!l.isClosed||h))return c.isLayoutBusy?void setFlowCallback("close",e,s):void((h||!1!==execUserCallback(e,r.onclose_start))&&(c[e].isMoving=!0,c.isLayoutBusy=!0,l.isClosed=!0,m?l.isHidden=!0:h&&(l.isHidden=!1),syncPinBtns(e,!1),l.isSliding||sizeMidPanes("horz"==c[e].dir?"all":"center"),n&&(n.css(f,cDims[f]).removeClass(p+"-open "+p+g+"-open").removeClass(p+"-sliding "+p+g+"-sliding").addClass(p+"-closed "+p+g+"-closed"),r.resizable&&n.draggable("disable").css("cursor","default").attr("title",""),a&&a.removeClass(u+"-open "+u+g+"-open").addClass(u+"-closed "+u+g+"-closed").attr("title",r.togglerTip_closed),sizeHandles()),d?(lockPaneForFX(e,!0),o.hide(r.fxName_close,r.fxSettings_close,r.fxSpeed_close,function(){lockPaneForFX(e,!1),l.isClosed&&i()})):(o.hide(),i())))},open=function(e,s,t){function i(){l.isSliding||sizeMidPanes("vert"==c[e].dir?"center":"all"),n&&(n.css(f,cDims[f]+getPaneSize(e)).removeClass(p+m+" "+p+g+m).addClass(p+h+" "+p+g+h).addClass(l.isSliding?p+z+" "+p+g+z:""),r.resizable?n.draggable("enable").css("cursor",r.resizerCursor).attr("title",r.resizerTip):n.css("cursor","default"),a&&a.removeClass(u+m+" "+u+g+m).addClass(u+h+" "+u+g+h).attr("title",r.togglerTip_open),sizeHandles("all")),sizeContent(e),syncPinBtns(e,!l.isSliding),execUserCallback(e,r.onopen_end||r.onopen),C&&execUserCallback(e,r.onshow_end||r.onshow),execFlowCallback(e)}var o=$Ps[e],n=$Rs[e],a=$Ts[e],r=options[e],l=state[e],d=!t&&l.isClosed&&"none"!=r.fxName_open,f=c[e].edge,p=r.resizerClass,u=r.togglerClass,g="-"+e,h="-open",m="-closed",z="-sliding",C=l.isShowing;if(delete l.isShowing,o&&(r.resizable||r.closable)&&(l.isClosed||l.isSliding))return l.isHidden&&!C?void show(e,!0):c.isLayoutBusy?void setFlowCallback("open",e,s):void(!1!==execUserCallback(e,r.onopen_start)&&(c[e].isMoving=!0,c.isLayoutBusy=!0,l.isSliding&&!s&&bindStopSlidingEvents(e,!1),l.isClosed=!1,C&&(l.isHidden=!1),setPaneMinMaxSizes(e),l.size>l.maxSize&&o.css(c[e].sizeType,max(1,cssSize(e,l.maxSize))),bindStartSlidingEvent(e,!1),d?(lockPaneForFX(e,!0),o.show(r.fxName_open,r.fxSettings_open,r.fxSpeed_open,function(){lockPaneForFX(e,!1),l.isClosed||i()})):(o.show(),i())))},lockPaneForFX=function(e,s){var t=$Ps[e];s?(t.css({zIndex:c.zIndex.animation}),"south"==e?t.css({top:cDims.top+cDims.innerHeight-t.outerHeight()}):"east"==e&&t.css({left:cDims.left+cDims.innerWidth-t.outerWidth()})):(state[e].isSliding||t.css({zIndex:c.zIndex.pane_normal}),"south"==e?t.css({top:"auto"}):"east"==e&&t.css({left:"auto"}))},bindStartSlidingEvent=function(e,s){var t=options[e],i=$Rs[e],o=t.slideTrigger_open;i&&t.slidable&&("click"!=o&&"dblclick"!=o&&"mouseover"!=o&&(o="click"),i[s?"bind":"unbind"](o,slideOpen).css("cursor",s?t.sliderCursor:"default").attr("title",s?t.sliderTip:""))},bindStopSlidingEvents=function(e,s){function t(s){clearTimer(e,"closeSlider"),s.stopPropagation()}var i=options[e],o=state[e],n=i.slideTrigger_close,a=$Ps[e],r=$Rs[e];o.isSliding=s,clearTimer(e,"closeSlider"),a.css({zIndex:s?c.zIndex.sliding:c.zIndex.pane_normal}),r.css({zIndex:s?c.zIndex.sliding:c.zIndex.resizer_normal}),"click"!=n&&"mouseout"!=n&&(n="mouseout"),s?(a.bind(n,slideClosed),r.bind(n,slideClosed),(n="mouseout")&&(a.bind("mouseover",t),r.bind("mouseover",t))):(a.unbind(n),r.unbind(n),(n="mouseout")&&(a.unbind("mouseover"),r.unbind("mouseover"),clearTimer(e,"closeSlider")))},slideOpen=function(){var e=$(this).attr("resizer");state[e].isClosed&&(bindStopSlidingEvents(e,!0),open(e,!0))},slideClosed=function(){function e(){bindStopSlidingEvents(t,!1),o.isClosed||close(t)}var s=$(this),t=s.attr("pane")||s.attr("resizer"),i=options[t],o=state[t];o.isClosed||o.isResizing||("click"==i.slideTrigger_close?e():setTimer(t,"closeSlider",e,300))},sizePane=function(e,s){var t=c[e].edge,i=c[e].dir,o=options[e],n=state[e],a=$Ps[e],r=$Rs[e];setPaneMinMaxSizes(e),n.minSize=max(n.minSize,o.minSize),o.maxSize>0&&(n.maxSize=min(n.maxSize,o.maxSize)),s=max(s,n.minSize),s=min(s,n.maxSize),n.size=s,r.css(t,s+cDims[t]),a.css(c[e].sizeType,max(1,cssSize(e,s))),n.isSliding||sizeMidPanes("horz"==i?"all":"center"),sizeHandles(),sizeContent(e),execUserCallback(e,o.onresize_end||o.onresize)},sizeMidPanes=function(e,s,t){e&&"all"!=e||(e="east,west,center");var i=getPaneDims();s&&$.extend(i,s),$.each(e.split(","),function(){if($Ps[this]){var e=str(this),s=options[e],o=state[e],n=$Ps[e],a=$Rs[e],r=!0,l={};if("center"==e?(i=getPaneDims(),l=$.extend({},i),l.width=max(1,cssW(e,l.width)),l.height=max(1,cssH(e,l.height)),r=l.width>1&&l.height>1,$.browser.msie&&(!$.boxModel||$.browser.version<7)&&($Ps.north&&$Ps.north.css({width:cssW($Ps.north,cDims.innerWidth)}),$Ps.south&&$Ps.south.css({width:cssW($Ps.south,cDims.innerWidth)}))):(l.top=i.top,l.bottom=i.bottom,l.height=max(1,cssH(e,i.height)),r=l.height>1),r){if(n.css(l),o.noRoom){if(o.noRoom=!1,o.isHidden)return;show(e,!o.isClosed)}t||(sizeContent(e),execUserCallback(e,s.onresize_end||s.onresize))}else if(!o.noRoom){if(o.noRoom=!0,o.isHidden)return;t?(n.hide(),a&&a.hide()):hide(e)}}})},sizeContent=function(e){e&&"all"!=e||(e=c.allPanes),$.each(e.split(","),function(){if($Cs[this]){var e=str(this),s=options[e].contentIgnoreSelector,t=$Ps[e],i=$Cs[e],o=i[0],n=cssH(t);t.children().each(function(){if(this!=o){var e=$(this);s&&e.is(s)||(n-=e.outerHeight())}}),n>0&&(n=cssH(i,n)),n<1?i.hide():i.css({height:n}).show()}})},sizeHandles=function(e,s){e&&"all"!=e||(e=c.borderPanes),$.each(e.split(","),function(){var e=str(this),t=options[e],i=state[e],o=$Ps[e],n=$Rs[e],a=$Ts[e];if(o&&n&&(t.resizable||t.closable)){var r,l,d=c[e].dir,f=i.isClosed?"_closed":"_open",p=t["spacing"+f],u=t["togglerAlign"+f],g=t["togglerLength"+f];if(0==p)return void n.hide();if(i.noRoom||i.isHidden||n.show(),"horz"==d?(r=o.outerWidth(),n.css({width:max(1,cssW(n,r)),height:max(1,cssH(n,p)),left:cssNum(o,"left")})):(r=o.outerHeight(),n.css({height:max(1,cssH(n,r)),width:max(1,cssW(n,p)),top:cDims.top+getPaneSize("north",!0)})),a){if(0==g||i.isSliding&&t.hideTogglerOnSlide)return void a.hide();if(a.show(),!(g>0)||"100%"==g||g>r)g=r,l=0;else if("string"==typeof u)switch(u){case"top":case"left":l=0;break;case"bottom":case"right":l=r-g;break;case"middle":case"center":default:l=Math.floor((r-g)/2)}else{var h=parseInt(u);l=u>=0?h:r-g+h}var m=!!t.togglerContent_open&&a.children(".content-open"),z=!!t.togglerContent_closed&&a.children(".content-closed"),C=i.isClosed?z:m;if(m&&m.css("display",i.isClosed?"none":"block"),z&&z.css("display",i.isClosed?"block":"none"),"horz"==d){var v=cssW(a,g);a.css({width:max(0,v),height:max(1,cssH(a,p)),left:l}),C&&C.css("marginLeft",Math.floor((v-C.outerWidth())/2))}else{var S=cssH(a,g);a.css({height:max(0,S),width:max(1,cssW(a,p)),top:l}),C&&C.css("marginTop",Math.floor((S-C.outerHeight())/2))}}s&&t.initHidden&&(n.hide(),a&&a.hide())}})},resizeAll=function(){var e=cDims.innerWidth,s=cDims.innerHeight;cDims=state.container=getElemDims($Container);var t,i,o=cDims.innerHeight<s,n=cDims.innerWidth<e;(o||n)&&$.each(["south","north","east","west"],function(e,s){t=state[s],i=c[s].dir,!t.isClosed&&(o&&"horz"==i||n&&"vert"==i)&&(setPaneMinMaxSizes(s),t.size>t.maxSize&&sizePane(s,t.maxSize))}),sizeMidPanes("all"),sizeHandles("all")},$Container=$(this).css({overflow:"hidden"}),$Ps={},$Cs={},$Rs={},$Ts={},c=config,cDims=state.container;return create(),{options:options,state:state,panes:$Ps,toggle:toggle,open:open,close:close,hide:hide,show:show,resizeContent:sizeContent,sizePane:sizePane,resizeAll:resizeAll,addToggleBtn:addToggleBtn,addOpenBtn:addOpenBtn,addCloseBtn:addCloseBtn,addPinBtn:addPinBtn,allowOverflow:allowOverflow,resetOverflow:resetOverflow,cssWidth:cssW,cssHeight:cssH}}}(jQuery);