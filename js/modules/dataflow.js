//self.aboutCopyright(copy);

define(["jquery","jqueryui","jqueryuictxm","knockout","modules/server/ioHandler","modules/fs/directories","modules/html/toolbar","modules/settings/config","modules/actions/frameActions","modules/graph/graphConstants","modules/gallery/components","modules/gallery/iconOptionsPicker","modules/gallery/portIconPicker","modules/gallery/cardinalityPicker","modules/gallery/decisionEnds","modules/erd/dbRecords","modules/flow/flowManager","modules/flow/flowUtils","modules/fs/fsBrowser","modules/diagram/mouseInteractor","modules/dialogs/newFlowDialog","modules/dialogs/newFolderDialog","modules/dialogs/openFlowDialog","modules/dialogs/nodePropsDialog","modules/dialogs/findDialog","modules/dialogs/linkPropsDialog","modules/dialogs/aboutDialog","modules/util/welcomeText","modules/util/startText","modules/dialogs/welcomeDialog","modules/dialogs/infoDialog","modules/dialogs/confirmDialog","modules/dialogs/thumbnailDialog","modules/settings/settingsDialog","modules/geometry/point","modules/util/utils","modules/draw/draw","modules/controller/flowCache","modules/exportLayout/demoFlow","modules/util/integrationText"],function(e,t,a,n,o,i,s,r,l,d,c,u,g,b,m,p,T,v,f,I,h,w,y,D,E,L,N,S,C,k,O,M,F,x,B,R,P,A,V,H){function _(e){e===d.flow().VERTICAL?(ve.removeClass("block-extendV"),ve.addClass("block-extendH"),fe.removeClass("block-extendH"),fe.addClass("block-extendV"),Ie.removeClass("block-shrinkV"),Ie.addClass("block-shrinkH"),he.removeClass("block-shrinkH"),he.addClass("block-shrinkV")):e===d.flow().HORIZONTAL&&(ve.removeClass("block-extendH"),ve.addClass("block-extendV"),fe.removeClass("block-extendV"),fe.addClass("block-extendH"),Ie.removeClass("block-shrinkH"),Ie.addClass("block-shrinkV"),he.removeClass("block-shrinkV"),he.addClass("block-shrinkH"))}function G(e){e===d.flow().VERTICAL?(De.removeClass("block-extendV"),De.addClass("block-extendH"),Ee.removeClass("block-shrinkV"),Ee.addClass("block-shrinkH")):e===d.flow().HORIZONTAL&&(De.removeClass("block-extendH"),De.addClass("block-extendV"),Ee.removeClass("block-shrinkH"),Ee.addClass("block-shrinkV"))}function W(e){if(j.selectedFileType()===d.fileTypes().ALL)return e;var t=[],a=j.selectedFileType().split(".").pop();return e.forEach(function(e){e.split(".").pop()===a&&t.push(e)}),t}function z(){e("#openSaveButtonOK").button("option","disabled",j.isFlowSaveBlocked())}function U(e){r.setFlowDirection(e),K(e),j.setFlowDirectionChange(),_(e),G(e),j.getFlowManager().hasDiagramOpen()&&j.manager.setDirty(!0),j.setConfirmFlag(d.bValue().FALSE),j.getFlowManager().setSettingsChanged(!0),setTimeout(function(){j.getFlowManager().refreshDiagramOnEdit(!0)},200)}function K(e){e===d.flow().VERTICAL?v.updateDecisionInputs(j.manager.getModelHandler().getFlowNodes(),d.decisionInputs().NORTH):e===d.flow().HORIZONTAL&&v.updateDecisionInputs(j.manager.getModelHandler().getFlowNodes(),d.decisionInputs().WEST)}function Z(){j.flowTabVisible(!1),j.erdTabVisible(!1),j.logTabVisible(!1),j.procTabVisible(!1)}function Y(){var e=document.getElementById("containerId").clientWidth;q.width>e&&r.hasShowBottomMessages()&&j.showBottomMessage("Drag the mouse on canvas to scroll")}function X(){var t=e(window).height();e(window).scrollTop();st.height(t-it)}var j=this,q=document.getElementById("canvasId"),J=document.getElementById("canvasThId"),$=q.getContext("2d"),Q=document.getElementById("containerId"),ee=document.getElementById("topContainerId"),te=e("#openFlowDialogId"),ae=e("#spinnerLevelsId"),ne=e("#spinnerLanesId"),oe=(e("#spinnerSpaceId"),e("#confirmDialogId")),ie=(e("#thumbnailDialogId"),document.getElementById("scaleId")),se=e("#nodePropsTabId"),re=document.getElementById("paletteCtrId"),le="[Select diagram type or 'Open Diagram / Template...']",de=!1,ce=!1,ue=!1;j.accHdrFlowTitle=n.observable(d.appTitles().FLOW_TITLE),j.accHdrSideTitle=n.observable(d.appTitles().SIDE_TITLE),j.accHdrMiscTitle=n.observable(d.appTitles().MISC_TITLE),j.accHdrERDTitle=n.observable(d.appTitles().DB_ERD_TITLE),j.accHdrLOGTitle=n.observable(d.appTitles().DB_LOG_TITLE),j.accHdrPROCTitle=n.observable(d.appTitles().PROCESS_TITLE),j.accHdrPagesTitle=n.observable(d.appTitles().PAGES_TITLE),j.accHdrBpelTitle=n.observable(d.appTitles().BPEL_TITLE),j.accHdrK8sTitle=n.observable(d.appTitles().K8S_TITLE),j.getCanvas=function(){return q},j.setCanvas=function(e){q=e},j.getCanvasContext=function(){return $},j.getCanvasTh=function(){return J},j.setCanvasTh=function(e){J=e},j.getCanvasContext=function(){return $},j.getCanvasContainer=function(){return Q},j.getTopContainer=function(){return ee},j.manager=new T(j),j.interactor=j.manager.getMouseInteractor(),j.dndHandler=j.manager.getDnDHandler(),j.updateTrigger=n.observable(!1);var ge=new f(j);j.getFlowManager=function(){return j.manager};var be=Date.now(),me=!1;j.isConnectionOK=n.observable(me),j.cnxResultOK=function(){me=!0,j.showOverlayMessage("Connected",500),j.isConnectionOK(me),setTimeout(function(){j.updateWindow()},200),j.manager.getInstallSettings(),j.callStartPage(!0)},j.cnxResultFAIL=function(e){Date.now()-be<3e3?(me=!1,console.log("*** connection FAIL: "+e.readyState),setTimeout(function(){j.showOverlayMessage("No server connection",500)},200)):(me=!0,j.showOverlayMessage("Connected",500)),j.isConnectionOK(me),setTimeout(function(){console.clear(),j.updateWindow()},200),j.manager.getInstallSettings(),j.callStartPage(!0)},e(document).ready(function(){function t(e){j.isDgmFlow(e)}function a(t){return e("<img>",{style:"margin: 0 6px -2px -22px;",src:u.getIconURL(t.value)})}function o(t){return e("<img>",{style:"margin: 0 6px -2px 0;",src:u.getIconURL(t.value)})}function i(t){return e("<img>",{style:"margin: 0px 6px 2px 10px; ",src:g.getPortIconURL(t.value)})}function c(t){return e("<img>",{style:"margin: 0 6px -2px 6px; background-color: white; }",src:g.getPortIconURL(t.value)})}$.canvas.width=0,$.canvas.height=0,h.initDialog(j.manager),w.initDialog(j.manager),y.initDialog(j.manager),x.initDialog(j.manager),D.initDialog(j.manager),E.initDialog(j.manager),L.initDialog(j.manager),N.initDialog(j.manager),O.initDialog(j.manager),M.initDialog(j.manager),F.initDialog(j.manager),k.initDialog(j.manager),s.initButtons(j),l.initActions(j),e("#canvasId").contextmenu(j.interactor.getContextMenu()),ee.addEventListener("mousemove",function(t){j.interactor.isOverCanvas(t)||(e("#canvasId").contextmenu("close"),j.manager.getFlowDiagram().setMousePoint(void 0))}),e("#paletteAccordionId").accordion({heightStyle:"fill",animate:{easing:"swing",duration:200},collapsible:!0,create:function(t,a){e(".ui-accordion-header").css("background","#b5e0fd"),e(".ui-accordion-header").css("height","12"),e(".ui-accordion-header.ui-state-active ").css("background","#408DEE")},activate:function(t,a){e(".ui-accordion-header").css("background","#b5e0fd"),e(".ui-accordion-header.ui-state-active ").css("background","#408DEE");a.newHeader.context&&a.newHeader.context.innerText;j.updateWindow()}}),setTimeout(function(){e("#paletteAccordionId").accordion("option","icons",{header:"ui-icon-triangle-1-e",activeHeader:"ui-icon-triangle-1-s"})},100),e("#accTableFlowId").height(262),e("#accTableMiscsId").height(184),e("#accTableERDId").height(80),e("#accTableLOGId").height(184),e("#accTablePROCId").height(28),j.isDgmFlow=n.observable(!1),e("#btnDgmModeDId").click(function(e,a){t(!0)}),e("#btnDgmModeUId").click(function(e,a){t(!1)}),j.hasDiagram=n.observable(!1),j.setDiagramOpen=function(e){j.hasDiagram(e)},e("#settingsTabId").tabs({}),e("#integrationTabId").tabs({}),e("textarea").keydown(function(t){33==t.which&&(window.scrollTo(0,window.scrollY),t.preventDefault(),t.target.setSelectionRange(0,0),e(this).scrollTop(0)),34==t.which&&(window.scrollTo(0,window.scrollY),t.preventDefault(),textareaLength=e(this).val().length,t.target.setSelectionRange(textareaLength,textareaLength),e(this).scrollTop(9999))}),se.tabs({activate:function(e,t){1===t.newTab.index()?se.css({overflow:"auto"}):se.css({overflow:"hidden"})}}),e("#infoTextId").attr("visibility","hidden"),ae.spinner({step:1,min:d.canvasRange().MIN,max:d.canvasRange().MAX,numberFormat:"n"}),ae.spinner("value",d.initial().LEVELS),ae.spinner("enable"),ne.spinner({step:1,min:d.canvasRange().MIN,max:d.canvasRange().MAX,numberFormat:"n"}),ne.spinner("value",d.initial().LANES),ne.spinner("enable");var b=e("#progressBarId");b.progressbar({value:!1}),b.height(14),e.widget("nodeIcons.iconselectmenu",e.ui.selectmenu,{_renderButtonItem:function(t){var a=e("<div>",{text:u.getIconLabel(t.value)});return o(t).prependTo(a),a},_renderItem:function(t,n){var o=e("<li>"),i=e("<div>",{text:u.getIconLabel(n.value)});return a(n).prependTo(i),o.append(i).appendTo(t)},_renderMenu:function(t,a){var n=this,o=u.getOptionItems(a);e.each(o,function(e,a){n._renderItemData(t,a)})},refreshButtonItem:function(e,t){if(r.getDiagramType()===d.diagramType().FLOWCHART){var a=u.getIndexValue(e,t);this.element[0].selectedIndex=a,this.refresh()}}}),e("#nodeIconItemsId").iconselectmenu().iconselectmenu("menuWidget").addClass("ui-menu-icons customicons"),e("#settingIconItemsId").iconselectmenu().iconselectmenu("menuWidget").addClass("ui-menu-icons customicons"),e.widget("portImages.porticonmenu",e.ui.selectmenu,{_renderButtonItem:function(t){var a=e("<div>",{style:"padding-left: 16px; height: 16px; width: 100px; background-color: white"});return i(t).prependTo(a),a},_renderItem:function(t,a){var n=e("<li>"),o=e("<div>",{style:"height: 16px; width: 120px"});return c(a).prependTo(o),n.append(o).appendTo(t)},_renderMenu:function(t,a){var n=this,o=g.getPortOptionItems(a);e.each(o,function(e,a){n._renderItemData(t,a)})},refreshButtonItem:function(e){var t=g.getPortIndexValue(e);this.element[0].selectedIndex=t,this.refresh()}}),e("#selectPortIconsId").porticonmenu().porticonmenu("menuWidget").addClass("ui-menu-icons porticons");document.getElementById("settingSchemesId");e.widget("settings.schemenames",e.ui.selectmenu,{_renderButtonItem:function(t){return e("<div>",{text:t.value})},_renderItem:function(t,a){var n=e("<li>"),o=e("<div>",{text:a.value});return n.append(o).appendTo(t)},_renderMenu:function(t,a){var n=this,o=j.manager.getSettingsManager().getOptionsPicker().getOptions();e.each(o,function(e,a){n._renderItemData(t,a)})},refreshButtonItem:function(e){var t=j.manager.getSettingsManager().getOptionsPicker().getIndex(e);this.element[0].selectedIndex=t,this.refresh()}}),e("#settingSchemesId").schemenames({width:240}).schemenames("menuWidget").addClass("ui-menu-icons schemenames"),e("#selectPartitionId").selectmenu({select:function(e,t){if(e.currentTarget){var a=e.currentTarget.textContent;console.log("$$$ disk select: "+a),j.selectedPartition(a)}},change:function(e,t){var a=e.currentTarget.textContent;console.log("### disk change: "+a)},create:function(e,t){setTimeout(function(){j.manager.getDiskNames()},1e3)}}).addClass("settingsDiskMenu").css("fontSize","16px"),e("#selectFileTypeId").selectmenu({create:function(t,a){setTimeout(function(){j.selectedFileType(d.fileTypes().JSON),e("#selectFileTypeId").selectmenu("refresh")},1e3)},select:function(e,t){if(e.currentTarget){var a=e.currentTarget.textContent;j.selectedFileType(a),j.manager.getDirContent()}}}).addClass("settingsDiskMenu"),e.widget("demomenu.demofilesmenu",e.ui.selectmenu,{_renderButtonItem:function(t){return e("<div>",{text:t.label})},refreshButtonItem:function(e){this.refresh()}}),e("#selectFileId").demofilesmenu().demofilesmenu("menuWidget").addClass("ui-menu-icons demofiles"),e("#flowMenuId").demofilesmenu().demofilesmenu("menuWidget").addClass("ui-menu-icons demofiles"),e("#dbMenuId").demofilesmenu().demofilesmenu("menuWidget").addClass("ui-menu-icons demofiles"),e("#logMenuId").demofilesmenu().demofilesmenu("menuWidget").addClass("ui-menu-icons demofiles"),e("#procMenuId").demofilesmenu().demofilesmenu("menuWidget").addClass("ui-menu-icons demofiles")}),j.startHereVisible=n.pureComputed(function(){return!j.hasDiagram()&&!j.isStartPage()&&!j.someDialogsOpen()}),j.someDialogsOpen=n.observable(!1),j.setSomeDialogsOpen=function(e){j.someDialogsOpen(e)},j.disableInactiveTypeButtons=function(e){e?r.getDiagramType()===d.diagramType().ERD_DB?(document.getElementById("btnFlowId").disabled=e,document.getElementById("btnERDId").disabled=!e,document.getElementById("btnLOGId").disabled=e):r.getDiagramType()===d.diagramType().ERD_LOG?(document.getElementById("btnFlowId").disabled=e,document.getElementById("btnERDId").disabled=e,document.getElementById("btnLOGId").disabled=!e):(document.getElementById("btnFlowId").disabled=!e,document.getElementById("btnERDId").disabled=e,document.getElementById("btnLOGId").disabled=e):(document.getElementById("btnFlowId").disabled=e,document.getElementById("btnERDId").disabled=e,document.getElementById("btnLOGId").disabled=e)},e("#btnFlowId").prop("checked",!0),e('input[id="btnFlowId"]').on("change",function(e){j.enforceDiagramType(d.diagramTypeText().FLOWCHART)}),e('input[id="btnERDId"]').on("change",function(e){j.enforceDiagramType(d.diagramTypeText().ERD_DB)}),e('input[id="btnLOGId"]').on("change",function(e){j.enforceDiagramType(d.diagramTypeText().ERD_LOG)}),j.diagramTypeFlow=n.observable(d.diagramTypeText().FLOWCHART),j.diagramTypeERD=n.observable(d.diagramTypeText().ERD_DB),j.diagramTypeLOG=n.observable(d.diagramTypeText().ERD_LOG),j.diagramTypeProc=n.observable(d.diagramTypeText().PROCESS),j.enforceDiagramType=function(t){t===d.diagramTypeText().ERD_DB?(e("#btnERDId").prop("checked",!0),r.setDiagramType(d.diagramType().ERD_DB),r.setFlowDirection(d.flow().VERTICAL),e("#btnVertical").prop("checked",!0),document.getElementById("btnHorizontal").disabled=!0,e("#paletteAccordionId").accordion("option","active",2),r.setShowNodeTasks(!1),r.setShowDBRecords(!0),r.setShowCardinality(!0),r.setShowRefHandles(!1),r.setShowNodeIcons(!1),r.setHideNodeNames(!1),r.setLinkStyle(d.linkStyle().STRAIGHT_LINE),r.setSegmentsGap(d.segmentsGap().MAX),r.setGridSpace(d.gridSpace().MAX),j.setERDTabVisible()):t===d.diagramTypeText().ERD_LOG?(e("#btnLOGId").prop("checked",!0),r.setDiagramType(d.diagramType().ERD_LOG),r.setFlowDirection(d.flow().VERTICAL),e("#btnVertical").prop("checked",!0),document.getElementById("btnHorizontal").disabled=!0,e("#paletteAccordionId").accordion("option","active",3),r.setShowNodeTasks(!1),r.setShowDBRecords(!0),r.setShowCardinality(!0),r.setShowRefHandles(!1),r.setShowNodeIcons(!1),r.setHideNodeNames(!1),r.setLinkStyle(d.linkStyle().STRAIGHT_LINE),r.setSegmentsGap(d.segmentsGap().MIN),r.setGridSpace(d.gridSpace().MIN),j.setLOGTabVisible()):(e("#btnFlowId").prop("checked",!0),r.setDiagramType(d.diagramType().FLOWCHART),e("#btnHorizontal").prop("disabled",!1),e("#paletteAccordionId").accordion("option","active",0),r.setSegmentsGap(d.segmentsGap().MIN),r.setGridSpace(d.gridSpace().MIN),r.setShowDBRecords(!1),r.setShowCardinality(!1),r.setShowNodeTasks(!1),j.setFlowTabVisible()),j.updateWindow()},j.showIconSelection=n.pureComputed(function(){return r.getDiagramType()===d.diagramType().FLOWCHART}),j.isAutoLayoutAllowed=n.observable(r.isAllowAuto()),j.forceTestAutoMode=function(e){r.setLayoutMode(d.layoutMode().AUTO),j.manager.getSelectionManager().clearSelections(),j.manager.resetScale(),j.runTestAutoMode()},j.resetTestAutoMode=function(){j.manager.clearDiagram(),r.setLayoutMode(d.layoutMode().MANUAL)},j.runTestAutoMode=function(){},j.dbNodeRecords=n.observableArray(),j.showDBTableEditorOnLeft=n.observable(!1),j.showDBCardinalityOnLeft=n.observable(!1),j.dbTableErrorMsg=n.observable(!1),j.dbTableKeys=n.observableArray(j.manager.getDBTableEditor().dbTableKeys()),j.keyId=n.observable(""),j.dbTableField=n.observable(""),j.dbTableTypes=n.observableArray(j.manager.getDBTableEditor().dbTableTypes()),j.typeId=n.observable(""),j.dbTableLength=n.observable(""),j.dbTableAutoIncr=n.observableArray(j.manager.getDBTableEditor().dbTableAutoIncr()),j.autoIncrId=n.observable(""),j.dbTableNotNull=n.observableArray(j.manager.getDBTableEditor().dbTableNotNull()),j.notNullId=n.observable(""),j.showDecisionEditorOnLeft=n.observable(!1),j.nodeEmojiItems=n.pureComputed(function(){return u.getNodeIconOptions()}),j.portIcons=n.pureComputed(function(){return g.getPortIconOptions()}),j.cardinalityItems=n.pureComputed(function(){return b.getCardinalityList()}),j.enableShowCardinality=n.observable(!1),j.setEnableShowCardinality=function(e){j.enableShowCardinality(e)},j.enableShowDB=n.observable(!1),j.setEnableShowDB=function(e){j.enableShowDB(e)},j.onOpsActionChange=function(e){},j.isProgressBarVisible=n.observable(!1),j.isProgressBarVisible.extend({notify:"always"}),j.setProgressBarVisible=function(e){j.isProgressBarVisible(e)},j.showPageMode=n.observable(r.hasPageMode()),j.isCanvasVisible=n.observable(!1),j.setCanvasVisible=function(e){j.isCanvasVisible(e)},j.scaleValue=n.observable(r.getScale()),e("#scaleId").slider(),ie.oninput=function(){r.setScale(this.value/d.scale().FACTOR),j.scaleValue(r.getScale()),j.manager.clearClipboard(),j.manager.getFlowDiagram().clearCanvas(),j.manager.rebuildFlowData()},j.editModeText=n.observable(r.isEditMode()?d.editModeText().EDIT:d.editModeText().VIEW),j.setEditModeText=function(e){e===d.editMode().EDIT_ALL?j.editModeText(d.editModeText().EDIT):j.editModeText(d.editModeText().VIEW)},j.setTooltipBox=function(e,t){e.length>0&&r.isEditMode()&&1===r.getScale()&&P.drawTooltip($,q.getBoundingClientRect(),t,e)},j.showTooltipBox=function(e){},j.getCurrentShortFileName=function(){var e=j.manager.getFileName(),t=e.indexOf(".json"),a=e.substring(0,t),n=a.lastIndexOf("/");return a.substring(n+1)};var pe,Te=document.getElementById("blockResizeId"),ve=e("#extendBlockAcrossId"),fe=e("#extendBlockAlongId"),Ie=e("#shrinkBlockAcrossId"),he=e("#shrinkBlockAlongId");j.showBlockResizeBar=function(e){var t=e.getExpandedShape(),a=r.getScale();Te.style.left=q.getBoundingClientRect().left+t.x*a+"px",Te.style.top=q.getBoundingClientRect().top+t.y*a-24+"px",ve.attr("disabled",!r.isEditMode()||!e.canExtendAcross()),fe.attr("disabled",!r.isEditMode()||!e.canExtendAlong()),Ie.attr("disabled",!r.isEditMode()||!e.canShrinkAcross()),he.attr("disabled",!r.isEditMode()||!e.canShrinkAlong()),Te.style.visibility="visible"},j.doResizeContainer=function(e){var t=j.getFlowManager().getSelectionManager().getSelections();t[0].getFlowType()===d.flowType().CONTAINER&&t[0].resizeOutline(e),Te.style.visibility="hidden",pe=!1},j.isBlockResizeBarVisible=function(){return pe},j.hideContainerBar=function(){Te.style.visibility="hidden"};var we,ye=document.getElementById("switchResizeId"),De=e("#extendSwitchAcrossId"),Ee=e("#shrinkSwitchAcrossId");j.showSwitchResizeBar=function(e){var t=e.getMenuBarPosition(),a=r.getScale();ye.style.left=q.getBoundingClientRect().left+t.x*a+"px",ye.style.top=q.getBoundingClientRect().top+t.y*a-24+"px",De.attr("disabled",!r.isEditMode()||!e.canExtendAcross()),Ee.attr("disabled",!r.isEditMode()||!e.canShrinkAcross()),ye.style.visibility="visible"},j.doResizeSwitch=function(e){var t=j.getFlowManager().getSelectionManager().getSelections();t[0].getFlowType()===d.flowType().SWITCH&&t[0].resizeOutline(e),ye.style.visibility="hidden",we=!1},j.isSwitchResizeBarVisible=function(){return we},j.hideSwitchBar=function(){ye.style.visibility="hidden"},j.showSearchList=n.observable(!1),j.showFindOptions=n.observable(!0),j.searchContentList=n.observableArray(),j.foundMatches=n.observable(),j.onFindTableClick=function(e){var t=e.target.innerText;E.selectedNewDisk(t)},j.onFindTableDblClick=function(e){j.onFindTableClick(e)},j.onPasteSearchText=function(e){E.selectedNewDisk(label)},j.currentPath=n.observable(),j.fsContentList=n.observableArray(),j.selectedPath=n.observable(),j.isOpenMode=n.observable(),j.isSaveMode=n.observable(),j.showPartitions=n.observable(!1),j.partitionsList=n.observableArray([""]),j.selectedPartition=n.observable(),j.filesTypes=n.observableArray([d.fileTypes().JSON,d.fileTypes().ALL]),j.selectedFileType=n.observable(d.fileTypes().JSON);j.showTemplatesOnly=n.observable(!1),j.setShowTemplatesOnly=function(e){j.showTemplatesOnly(e)},j.callOpenFlowDialog=function(e){e?(j.setFSDialogMode(d.fsDialogMode().OPEN),j.setShowTemplatesOnly(!0),setTimeout(function(){te.dialog("open"),te.dialog({height:180})},200)):(j.setShowTemplatesOnly(!1),setTimeout(function(){j.isConnectionOK()?te.dialog({height:440}):te.dialog({height:180}),j.manager.getRootDir(),te.dialog("open")},200))},j.onDiskTableClick=function(e){var t=e.target.innerText;y.selectedNewDisk(t)},j.setFSDialogMode=function(e){ge.setFSDialogMode(e)},j.getFSDialogMode=function(){return ge.getFSDialogMode()},j.restoreWorkDir=function(){ge.restoreWorkDir()},j.setWorkDir=function(e){ge.setWorkDir(e)},j.getWorkDir=function(){return ge.getWorkDir()},j.getSelectedFSDir=function(){return ge.getSelectedFSDir()},j.getSelectedFSFile=function(){return ge.getSelectedFSFile()},j.onDirTableClick=function(e){ge.onDirTableClick(e)},j.deleteFSItem=function(){ge.deleteFSItem()},j.onDirTableDblClick=function(e){ge.onDirTableDblClick(e)},j.updateMainFSLocation=function(){ge.updateMainFSLocation()},j.goOneDirBack=function(){ge.goOneDirBack()},j.setDirsList=function(e,t){ge.setDirsList(e,t)},j.setFolderContent=function(e,t){ge.setFolderContent(e,t)},j.onFileTypeChange=function(e){ge.onFileTypeChange(e)},j.showForegroundSelection=n.observable(!0),j.showBackgroundSelection=n.observable(!0),j.settingsSchemes=n.observableArray([]),j.removeFromSettingsSchemes=function(e){for(var t=-1,a=0;a<j.settingsSchemes().length;a++)if(j.settingsSchemes()[a]===e){t=a;break}a>-1?j.settingsSchemes.splice(t,1):alert("bad index for settingsSchemes: "+t)};var Le;j.setNewAction=function(e){Le=e},j.isNewAction=function(){return Le},j.filesList=n.observableArray();var Ne=[];j.setFilesList=function(t){if(Ne=t,j.filesList(t),j.filesList(W(t)),Le)e("#newFlowDialogId").dialog("open");else;},j.selectedFile=n.observable(),j.getSelectedFile=function(){return j.isConnectionOK()?_selectedFile:j.selectedFile()},j.isInputInvalid=n.observable(!1),j.validateMessage=n.observable(""),j.newFSNameValue=n.observable(""),j.nameValueEmpty=n.observable(""),j.validateFSName=function(t,a){var n=R.trimMultipleSpaces(j.newFSNameValue()),o=a?i.getDirectoriesLabels():j.filesList();j.nameValueEmpty(0===n.length);var s=(j.isInputInvalid(),R.containsFSName(o,n)),r=R.isFSNameValid(j.newFSNameValue()),l=n.length>0&&(!r||s);j.isInputInvalid(l),e("#newFlowButtonOK").button("option","disabled",j.isInputInvalid()||j.nameValueEmpty()),e("#newFolderButtonOK").button("option","disabled",j.isInputInvalid()||j.nameValueEmpty()),r?s?j.validateMessage("Duplicate name"):j.validateMessage(""):j.validateMessage("Only alphanumericals, slashes, dots, dashes, underscores and single spaces"),t&&n.length>0&&r&&"Enter"===t.code&&(Le?(h.createNewDiagram(j.manager),e("#newFlowDialogId").dialog("close")):(w.createNewFolder(j.manager),e("#newFolderDialogId").dialog("close")))},j.saveAsInputInvalid=n.observable(!1),j.saveAsMessage=n.observable(""),j.saveAsFileNameValue=n.observable(""),j.saveAsNameEmpty=n.observable(""),j.validateSaveAsFileName=function(e){var t=R.trimMultipleSpaces(j.editNameValue());if(t.length>0){var a=R.containsFSName(j.filesList(),t),n=R.isFSNameValid(t),o=!a&&n;j.isEditNameInvalid(!o)}else j.isEditNameInvalid(!0);a?j.validateNameMessage("Duplicate name"):n?j.validateNameMessage(""):j.validateNameMessage("Only alphanumericals, slashes, dots, dashes, underscores and single spaces")},j.saveAsNewVersion=n.observable(1),j.versionInputInvalid=n.observable(!1),j.validateAsVersion=function(e){var t=(j.saveAsNewVersion(),R.isVersionNumber(j.saveAsNewVersion()));j.versionInputInvalid(!t),z()},j.isFlowSaveBlocked=function(){return j.saveAsInputInvalid()||j.saveAsNameEmpty()||j.saveAsNewVersion()&&j.versionInputInvalid()};var Se=n.observable();j.propsLinkSourceName=n.observable(),j.propsLinkSourceLabel=n.observable(),j.propsLinkTargetName=n.observable(),j.propsLinkTargetLabel=n.observable(),j.propsLinkLabel=n.observable(),j.getPropsLink=function(){return Se()},j.getPropsLinkLabelValue=function(){return j.propsLinkLabel()},j.showLinkProps=function(t){Se(t),j.propsLinkSourceName(Se().getLinkSourcePortName()),j.propsLinkSourceLabel(Se().getLinkSourcePortLabel()),j.propsLinkTargetName(Se().getLinkTargetPortName()),j.propsLinkTargetLabel(Se().getLinkTargetPortLabel()),j.propsLinkLabel(Se().getLinkLabel()),e("#linkPropsDialogId").dialog("open")},j.editPropsLinkLabel=function(e){j.propsLinkLabel(document.getElementById("propsLinkLabelId").value)},j.propsFgndVisible=n.observable(!0),j.setPropsFgndVisible=function(e){j.propsFgndVisible(e)},j.propsNodeInputs=n.observableArray();var Ce,ke;j.getPropsNodeInputsIdx=function(){return Ce},j.getPropsNodeInputsValue=function(){return ke},j.propsNodeOutputs=n.observableArray();var Oe,Me;j.getPropsNodeOutputsIdx=function(){return Oe},j.getPropsNodeOutputsValue=function(){return Me},j.propsNodeRefInputs=n.observableArray();var Fe,xe;j.getPropsNodeRefInputsIdx=function(){return Fe},j.getPropsNodeRefInputsValue=function(){return xe},j.propsNodeRefOutputs=n.observableArray();var Be,Re;j.getPropsNodeRefOutputsIdx=function(){return Be},j.getPropsNodeRefOutputsValue=function(){return Re};var Pe=n.observable();j.setPropsNode=function(e){Pe(e)},j.getPropsNode=function(){return Pe()},j.propsNodeName=n.computed(function(){return Pe()?Pe().getName():"?"},this),j.showNodeProps=function(t){Pe(t),t.getFlowType()===d.flowType().DB_TABLE&&t.closeDBEditors(),u.setNodeCategory(t.getNodeCategory()),j.propsNodeInputs(Pe().getInputPortsProperties()),j.propsNodeOutputs(Pe().getOutputPortsProperties()),j.propsNodeRefInputs(Pe().getRefInPortsProperties()),j.propsNodeRefOutputs(Pe().getRefOutPortsProperties()),j.dbNodeRecords(Pe().getDBRecords()),e("#nodePropsDialogId").dialog("open")};var Ae=n.observable();j.setPropsPort=function(e){Ae(e)},j.getPropsPort=function(){return Ae()},j.propsPortName=n.computed(function(){return Ae()?Ae().getName():"?"},this),j.editPropsNodeInputLabel=function(e){Ce=e.target.parentNode.parentNode.rowIndex;var t=document.getElementById("nodeInputsTableId"),a=t.getElementsByTagName("tr");ke=a[Ce].cells[2].getElementsByTagName("input")[0].value},j.checkPortInputCardinality=function(e){D.editPortInputCardinality(e)},j.editPropsNodeOutputLabel=function(e){Oe=e.target.parentNode.parentNode.rowIndex;var t=document.getElementById("nodeOutputsTableId"),a=t.getElementsByTagName("tr");Me=a[Oe].cells[2].getElementsByTagName("input")[0].value},j.checkPortOutputCardinality=function(e){D.editPortOutputCardinality(e)},j.editPropsNodeRefInputLabel=function(e){Fe=e.target.parentNode.parentNode.rowIndex;var t=document.getElementById("nodeRefInputsTableId"),a=t.getElementsByTagName("tr");xe=a[Fe].cells[2].getElementsByTagName("input")[0].value},j.checkPortRefInputCardinality=function(e){D.editPortRefInputCardinality(e)},j.editPropsNodeRefOutputLabel=function(e){Be=e.target.parentNode.parentNode.rowIndex;var t=document.getElementById("nodeRefOutputsTableId"),a=t.getElementsByTagName("tr");Re=a[Be].cells[2].getElementsByTagName("input")[0].value},j.checkPortRefOutputCardinality=function(e){D.editPortRefOutputCardinality(e)},j.isEditNameInvalid=n.observable(!1),j.editNameValue=n.observable(""),j.newFlowNameValue=n.observable(""),j.validateNameMessage=n.observable("");var Ve;j.setOldName=function(e){Ve=e},j.validateInlineNodeName=function(){var e=j.manager.getInlineInputEditor().getCurrentValue(),t=R.trimMultipleSpaces(e);j.validateEditName(t)},j.validateDialogNodeName=function(){var e=R.trimMultipleSpaces(j.editNameValue());j.validateEditName(e)},j.validateNewFlowName=function(){var e=R.trimMultipleSpaces(j.editNameValue());j.validateEditName(e)},j.validateNewFolderName=function(){var e=R.trimMultipleSpaces(j.editNameValue());j.validateEditName(e)},j.validateEditName=function(e){if(e.length>0){var t=R.getAllNames(j.manager.getNodeNamesMap()),a=R.isDuplicateName(Ve,e,t),n=R.isNewNodeNameValid(e),o=!a&&n;j.isEditNameInvalid(!o)}else j.isEditNameInvalid(!0);a?j.validateNameMessage("Duplicate name"):n?j.validateNameMessage(""):j.validateNameMessage("Only alphanumericals, slashes, dots, dashes, underscores and single spaces")},j.isSchemeNameInvalid=n.observable(!1),j.schemeNameValue=n.observable(""),j.validateSchemeMessage=n.observable(""),j.validateSchemeName=function(){var e=document.getElementById("newSchemeId").value;if(e.length>0){var t=j.manager.getSettingsManager().getSchemeNames(),a=t.includes(e),n=R.isSchemeNameValid(e),o=!a&&n;j.isSchemeNameInvalid(!o)}else j.isSchemeNameInvalid(!1);a?j.validateSchemeMessage("Duplicate name"):n?j.validateSchemeMessage(""):j.validateSchemeMessage("Only alphanumericals, dots, dashes and underscores")},j.isLinkLabelInvalid=n.observable(!1),j.validateLinkMessage=n.observable("");var He;j.setOldLinkLabel=function(e){He=e},j.validateLinkLabel=function(e){var t=R.trimMultipleSpaces(j.propsLinkLabel());if(t.length>0){var a=R.getAllLinkLabels(j.manager.getLinkLabelsMap()),n=R.isDuplicateLabel(He,t,a),o=t===He||R.isNewLinkLabelValid(t),i=!n&&o;j.isLinkLabelInvalid(!i)}else j.isLinkLabelInvalid(!1);n?j.validateLinkMessage("Duplicate label"):o?j.validateLinkMessage(""):j.validateLinkMessage("Only alphanumericals, slashes, dots, dashes, underscores and single spaces")},j.pictureURLValue=n.observable(""),j.isPictureURLInvalid=n.observable(!1),j.validatePictureURL=function(e){j.isPictureURLInvalid(!1)},j.showNewFileName=n.observable(),j.showEditedInfo=n.observable(),j.showDecisionInfo=n.observable(),j.decisionInputPicture=n.observable(),j.decisionEndsPicture=n.observable(),j.isNodeNameInvalid=n.observable(!1),j.newNodeNameValue=n.observable(""),j.invalidNameMessage=n.observable(""),j.resetDecisionIndices=function(){j.updateTrigger(!j.updateTrigger()),m.resetCurrentIndices(),j.decisionInputPicture(m.getCurrentInputPicture()),j.decisionEndsPicture(m.getCurrentEndsPicture())},j.btnFlowH2click=function(){r.getDiagramType()!=d.diagramType().ERD_DB&&r.getDiagramType()!=d.diagramType().ERD_LOG&&j.changeFlowDirection(d.flow().VERTICAL)},j.btnFlowV2click=function(){r.getDiagramType()!=d.diagramType().ERD_DB&&r.getDiagramType()!=d.diagramType().ERD_LOG&&j.changeFlowDirection(d.flow().HORIZONTAL)},j.changeFlowDirection=function(e){U(e)};var _e=!1;j.hasFlowDirectionChange=function(){return _e},j.setFlowDirectionChange=function(){_e=!0},j.resetFlowDirectionChange=function(){_e=!1},j.isHorizontal=n.observable(!1),j.layoutModeText=n.observable(r.getLayoutModeText()),j.diagramModeText=n.observable(r.getDiagramModeText());var Ge=(e("#newId"),e("#openId")),We=(e("#importId"),e("#undoId")),ze=e("#redoId"),Ue=e("#findId"),Ke=e("#refreshId"),Ze=e("#clearId"),Ye=e("#leftId"),Xe=e("#rightId"),je=e("#deleteId"),qe=e("#copyId"),Je=e("#pasteId"),$e=e("#saveId"),Qe=e("#saveAsId"),et=e("#btnFlowVId");e("#btnThumbnailId");j.updateWindow=function(t){j.updateTrigger(!j.updateTrigger()),j.isHorizontal(r.getFlowDirection()===d.flow().HORIZONTAL),j.layoutModeText(r.getLayoutModeText()),j.diagramModeText(r.getDiagramModeText());var a=!r.isEditMode();s.updateMenus(j),Ge.attr("disabled",!j.isConnectionOK()),We.attr("disabled",a||!j.manager.canUndo()).attr("title",j.manager.getUndoName()),ze.attr("disabled",a||!j.manager.canRedo()).attr("title",j.manager.getRedoName()),je.attr("disabled",a||!j.manager.getSelectionManager().hasSelections()),qe.attr("disabled",a||!j.manager.canCopy()),Je.attr("disabled",a||!j.manager.readyToPaste()),$e.attr("disabled",a||!j.isConnectionOK()||!j.manager.isDirty()||j.manager.isTemplate()),Qe.attr("disabled",a||!j.isConnectionOK()||j.manager.getModelHandler().isDiagramEmpty()),Ke.attr("disabled",!j.isCanvasVisible()),Ue.attr("disabled",!j.isCanvasVisible()),Ze.attr("disabled",a||!j.isCanvasVisible()),Ye.attr("disabled",!j.manager.hasPreviousDiagram()),Xe.attr("disabled",!j.manager.hasNextDiagram()),et.attr("disabled",r.getAppMode()!==d.appMode().FLOW_MODE),e("#btnFlowHId").attr("disabled",a),e("#btnFlowVId").attr("disabled",a),
"visible"!==document.getElementById("blockResizeId").style.visibility||pe?pe&&(document.getElementById("blockResizeId").style.visibility="hidden",pe=!1):pe=!0,"visible"!==document.getElementById("switchResizeId").style.visibility||we?we&&(document.getElementById("switchResizeId").style.visibility="hidden",we=!1):we=!0,j.manager.isInitialResizeMode()&&j.manager.getModelHandler().isDiagramEmpty()?(ae.spinner("enable"),ne.spinner("enable")):(ae.spinner("disable"),ne.spinner("disable")),j.disableInactiveTypeButtons(!j.manager.getModelHandler().isDiagramEmpty())},j.initData=function(){j.updateWindow()},j.galleryFlowNodes=n.pureComputed(function(){return j.updateTrigger(),r.getFlowDirection()===d.flow().HORIZONTAL?c.getFlowNodesH():c.getFlowNodesV()}),j.galleryMiscNodes=n.pureComputed(function(){return j.updateTrigger(),r.getFlowDirection()===d.flow().HORIZONTAL?c.getMiscNodesH():c.getMiscNodesV()}),j.galleryERDNodes=n.pureComputed(function(){return j.updateTrigger(),c.getERDNodes()}),j.galleryLOGNodes=n.pureComputed(function(){return j.updateTrigger(),c.getLOGNodes()}),j.galleryProcNodes=n.pureComputed(function(){return j.updateTrigger(),c.getProcNodes()}),j.pageNodes=n.pureComputed(function(){j.updateTrigger();for(var e=[],t=r.getFlowDirection()===d.flow().HORIZONTAL?c.getHPageItems():c.getVPageItems(),a=0;a<t.length;a++)e.push(t[a]);return e}),j.diagramDisplayName=n.observable(le),j.setDiagramDisplayName=function(e){e&&e.length>0?(j.showTemplatesOnly()&&(e="[template]: "+e),j.diagramDisplayName(e)):j.diagramDisplayName(le)},j.taskActionInputValue=n.observable(""),j.taskServiceInputValue=n.observable(""),j.taskSubscribeInputValue=n.observable(""),j.taskPublishInputValue=n.observable(""),j.taskOperationInputValue=n.observable(""),j.taskExpressionInputValue=n.observable(""),j.showTaskAction=n.observable(!0),j.showTaskService=n.observable(!0),j.showTaskSubscribe=n.observable(!0),j.showTaskPublish=n.observable(!0),j.showTaskOperation=n.observable(!0),j.showTaskExpression=n.observable(!0),j.taskActionSelected=n.observable(!0),j.taskServiceSelected=n.observable(!1),j.taskSubscribeSelected=n.observable(!1),j.taskPublishSelected=n.observable(!1),j.taskOperationSelected=n.observable(!1),j.taskExpressionSelected=n.observable(!1),j.nodeActionList=n.observableArray(),j.nodeOperationList=n.observableArray(),j.nodeServiceList=n.observableArray(),j.nodePublishList=n.observableArray(),j.nodeSubscribeList=n.observableArray(),j.showTaskEditorOnLeft=n.observable(!1),j.aboutTitle=n.observable(""),j.aboutVersion=n.observable(""),j.aboutText=n.observable(""),j.aboutSources=n.observable(""),j.aboutCopyright=n.observable(""),j.showAboutBox=function(t,a,n,o,i){j.aboutTitle(t),j.aboutVersion(a),j.aboutText(n),j.aboutSources(o),e("#aboutDialogId").dialog("open")},j.welcomeTitle=n.observable(""),j.welcomeGreeting=n.observable(""),j.welcomeTo=n.observable(""),j.welcomeTip=n.observable(""),j.showWelcomeBox=function(t,a,n,o){j.welcomeTitle(t),j.welcomeGreeting(a),j.welcomeTo(n),j.welcomeTip(o),e("#welcomeDialogId").dialog("open")},j.isStartPage=n.observable(!1);document.getElementById("startToTopBtn");j.isStartPageOpen=function(){return j.isStartPage()},j.setStartPageOpen=function(e){j.isStartPage(e)},j.onStartToTopClick=function(t){e("#navbarId").show(),setTimeout(function(){e("#topContainerId").show(),j.manager.refreshDiagramOnEdit(!0)},20)},j.startTitle=n.observable(""),j.startTopText1=n.observable(""),j.startTopText2=n.observable(""),j.startFlowTitle=n.observable(""),j.startERDTitle=n.observable(""),j.startLOGTitle=n.observable(""),j.startProcessTitle=n.observable(""),j.showStartPage=function(e,t,a,n,o,i,s){j.startTitle(e),j.startTopText1(t),j.startTopText2(a),j.startFlowTitle(n),j.startERDTitle(o),j.startLOGTitle(i),j.startProcessTitle(s),j.manager.getStartPageEditor().showStartPageEditor(j.manager)},j.callStartPage=function(t){var a=C.getTitle(),n=C.getTopText1(),o=C.getTopText2(),i=C.getFlowTitle(),s=C.getERDTitle(),r=C.getLOGTitle();procTitle=C.getProcessTitle(),e("#paletteCtrId").hide(),j.manager.clearNamesCache(),j.getFlowManager().clearDiagram(),j.getFlowManager().refreshDiagram(),j.showStartPage(a,n,o,i,s,r,procTitle)},j.templatesList=n.observableArray([""]),j.flowTemplates=n.observableArray(j.manager.getTemplates().getFlowTemplatesList()),j.dbTemplates=n.observableArray(j.manager.getTemplates().getDBTemplatesList()),j.logTemplates=n.observableArray(j.manager.getTemplates().getLOGTemplatesList()),j.procTemplates=n.observableArray(j.manager.getTemplates().getPROCTemplatesList()),j.showFlowTemplates=n.observable(r.getDiagramType()===d.diagramType().FLOWCHART),j.showDBTemplates=n.observable(r.getDiagramType()===d.diagramType().ERD_DB),j.showLOGTemplates=n.observable(r.getDiagramType()===d.diagramType().ERD_LOG),j.showPROCTemplates=n.observable(r.getDiagramType()===d.diagramType().PROCESS),j.flowTabVisible=n.observable(),j.erdTabVisible=n.observable(),j.logTabVisible=n.observable(),j.procTabVisible=n.observable(),j.setFlowTabVisible=function(){Z(),j.flowTabVisible(!0)},j.setERDTabVisible=function(){Z(),j.erdTabVisible(!0)},j.setLOGTabVisible=function(){Z(),j.logTabVisible(!0)},j.setPROCTabVisible=function(){Z(),j.procTabVisible(!0)},j.infoMessage=n.observable(""),j.infoMessageVisible=n.observable(),j.showInfoMessage=function(t,a){j.infoMessage(t),j.infoMessageVisible(!1),e("#infoDialogId").dialog("open"),a&&e("#infoDialogId").dialog("option","title",a)},e("#infoDialogId").on("dialogopen",function(t,a){setTimeout(function(){j.infoMessageVisible(!0),e("#infoTextId").scrollTop(0)},200)});var tt;j.getConfirmFlag=function(){return tt},j.setConfirmFlag=function(e){tt=e},j.confirmMessage=n.observable(""),j.showConfirmMessage=function(t,a,n){M.initDialog(j.manager),j.confirmMessage(t),a&&oe.dialog("option","title",a),n&&(e(e("button",oe.parent())[1]).text(n.first),e(e("button",oe.parent())[2]).text(n.second)),oe.dialog("open")},j.isShowThumbnail=n.observable(),j.btnThumbnailShow=function(){j.isShowThumbnail(!0),e("#thumbnailDialogId").dialog("open"),j.repaintDiagram()},j.btnThumbnailHide=function(){j.isShowThumbnail(!1),j.repaintDiagram()},j.overlayText=n.observable("");var at=e("#saveOverlayId");j.showOverlayMessage=function(e,t){var a=t||400;j.overlayText(e),at.show(),setTimeout(function(){at.fadeOut(a)},a+200)},j.bottomMessageText=n.observable("");var nt=e("#bottomOverlayId");j.showBottomMessage=function(e,t){var a=t||1e3;j.bottomMessageText(e),nt.show(),setTimeout(function(){nt.fadeOut(a)},a+200)},Q.addEventListener("scroll",function(e){e.currentTarget.scrollLeft||e.currentTarget.scrollRight}),ie.addEventListener("mousemove",function(e){Y()},!1),ie.onchange=function(){Y()};var ot;j.getDraggedPaletteId=function(){return ot},j.setDraggedPaletteId=function(e){ot=e},j.onPaletteDragStart=function(e){parseInt(e.target.id)===d.flowType().DB_TABLE_2||parseInt(e.target.id)===d.flowType().DB_TABLE_3||parseInt(e.target.id)===d.flowType().DB_TABLE_4?(ot=d.flowType().DB_TABLE,e.dataTransfer.setData("text",d.flowType().DB_TABLE),e.dataTransfer.setData("altType",e.target.id)):parseInt(e.target.id)===d.flowType().ENTITY_W?(ot=d.flowType().ENTITY,e.dataTransfer.setData("text",d.flowType().ENTITY),e.dataTransfer.setData("altType",e.target.id)):parseInt(e.target.id)===d.flowType().RELATION_W?(ot=d.flowType().RELATION,e.dataTransfer.setData("text",d.flowType().RELATION),e.dataTransfer.setData("altType",e.target.id)):parseInt(e.target.id)===d.flowType().ATTR_MULTI||parseInt(e.target.id)===d.flowType().ATTR_DRV?(ot=d.flowType().ATTRIBUTE,e.dataTransfer.setData("text",d.flowType().ATTRIBUTE),e.dataTransfer.setData("altType",e.target.id)):(ot=e.target.id,e.dataTransfer.setData("text",e.target.id))},j.onPaletteDragEnd=function(e){var t=q.getBoundingClientRect();e.clientX>t.left&&e.clientX<t.right&&e.clientY>t.top&&e.clientY<t.bottom||j.manager.getDnDHandler().resetDrag()},j.requestFocus=function(){},j.isControlPressed=function(){return de},j.setControlPressed=function(e){de=e},j.isEditControlPressed=function(){return ue},j.setEditControlPressed=function(e){ue=e},j.isShiftPressed=function(){return ce},j.setShiftPressed=function(e){ce=e},window.onresize=function(){re.style.height=window.innerHeight+"px",e("#thumbnailDialogId").dialog({position:{my:"right bottom",at:"right-8 bottom-6",of:window}}),X(),j.manager.getInlineInputEditor().relocateInlineFieldEditor(),j.manager.getInlineAreaEditor().relocateInlineAreaEditor(),j.manager.getDBTableEditor().relocateDBTableEditor(),j.manager.getDBCardinalityEditor().relocateDBCardinalityEditor(),j.manager.getDecisionLayoutEditor().relocateDecisionLayoutEditor(),j.manager.getFlowTasksEditor().relocateFlowTasksEditor(),Y(),j.repaintDiagram()},window.onscroll=function(){e("#thumbnailDialogId").dialog({position:{my:"right bottom",at:"right-8 bottom-6",of:window}}),j.repaintDiagram()};var it=0,st=e("#containerId");return j.repaintDiagram=function(){j.hideContainerBar(),j.hideSwitchBar(),j.manager.paintDiagram()},n.applyBindings(j),j.initData(),{initFlowDemo:function(){window.scrollTo(0,0),e(window).trigger("resize"),j.setProgressBarVisible(!1),j.showOverlayMessage("Connecting to server...",1e3),o.checkServerConnection(j.manager)}}});