//self.aboutCopyright(copy);

define(["jquery","jqueryui","jqueryuictxm","knockout","modules/server/ioHandler","modules/fs/directories","modules/html/toolbar","modules/settings/config","modules/actions/frameActions","modules/graph/graphConstants","modules/gallery/components","modules/gallery/iconOptionsPicker","modules/gallery/portIconPicker","modules/gallery/cardinalityPicker","modules/gallery/decisionEnds","modules/erd/dbRecords","modules/erd/dbConstants","modules/flow/flowManager","modules/flow/flowUtils","modules/fs/fsBrowser","modules/diagram/mouseInteractor","modules/dialogs/newFlowDialog","modules/dialogs/newFolderDialog","modules/dialogs/openFlowDialog","modules/dialogs/nodePropsDialog","modules/dialogs/importExportDialog","modules/dialogs/findDialog","modules/dialogs/linkPropsDialog","modules/dialogs/dbTableEditor","modules/dialogs/aboutDialog","modules/util/welcomeText","modules/util/startText","modules/dialogs/welcomeDialog","modules/dialogs/infoDialog","modules/dialogs/confirmDialog","modules/dialogs/confirmDialog2","modules/dialogs/confirmSrvDialog","modules/dialogs/thumbnailDialog","modules/settings/settingsDialog","modules/geometry/point","modules/util/utils","modules/draw/draw","modules/controller/flowCache","modules/util/integrationText"],function(e,t,a,i,o,n,s,r,l,d,c,g,u,b,m,p,v,T,f,I,h,D,y,w,C,E,N,S,x,L,B,O,P,F,k,M,R,A,V,H,_,K,W,G){function z(e){e===d.flow().VERTICAL?(Ee.removeClass("block-extendV"),Ee.addClass("block-extendH"),Ne.removeClass("block-extendH"),Ne.addClass("block-extendV"),Se.removeClass("block-shrinkV"),Se.addClass("block-shrinkH"),xe.removeClass("block-shrinkH"),xe.addClass("block-shrinkV")):e===d.flow().HORIZONTAL&&(Ee.removeClass("block-extendH"),Ee.addClass("block-extendV"),Ne.removeClass("block-extendV"),Ne.addClass("block-extendH"),Se.removeClass("block-shrinkH"),Se.addClass("block-shrinkV"),xe.removeClass("block-shrinkV"),xe.addClass("block-shrinkH"))}function U(e){e===d.flow().VERTICAL?(Oe.removeClass("block-extendV"),Oe.addClass("block-extendH"),Pe.removeClass("block-shrinkV"),Pe.addClass("block-shrinkH")):e===d.flow().HORIZONTAL&&(Oe.removeClass("block-extendH"),Oe.addClass("block-extendV"),Pe.removeClass("block-shrinkH"),Pe.addClass("block-shrinkV"))}function Z(e){if(ie.selectedFileType()===d.fileTypes().ALL)return e;var t=[],a=ie.selectedFileType().split(".").pop();return e.forEach(function(e){e.split(".").pop()===a&&t.push(e)}),t}function Y(){e("#openSaveButtonOK").button("option","disabled",ie.isFlowSaveBlocked())}function q(e){r.setFlowDirection(e),j(e),ie.setFlowDirectionChange(),z(e),U(e),ie.getFlowManager().hasDiagramOpen()&&ie.manager.setDirty(!0),ie.setConfirmFlag(d.bValue().FALSE),ie.getFlowManager().setSettingsChanged(!0),setTimeout(function(){ie.getFlowManager().refreshDiagramOnEdit(!0),ie.getFlowManager().refreshDiagramOnEdit(!0)},200)}function j(e){e===d.flow().VERTICAL?f.updateDecisionInputs(ie.manager.getModelHandler().getFlowNodes(),d.decisionInputs().NORTH):e===d.flow().HORIZONTAL&&f.updateDecisionInputs(ie.manager.getModelHandler().getFlowNodes(),d.decisionInputs().WEST)}function J(){Je.detach(),Xe.detach(),$e.detach(),Qe.detach(),et.detach(),tt.detach(),at.detach(),it.detach(),ot.detach(),nt.detach(),st.detach(),rt.detach(),lt.detach(),dt.detach(),ct.detach(),gt.detach(),ut.detach(),bt.detach(),mt.detach()}function X(e){Je.appendTo(e),Xe.appendTo(e),$e.appendTo(e),Qe.appendTo(e),et.appendTo(e),tt.appendTo(e),at.appendTo(e),it.appendTo(e),ot.appendTo(e),nt.appendTo(e),st.appendTo(e),rt.appendTo(e),lt.appendTo(e),dt.appendTo(e),ct.appendTo(e),gt.appendTo(e),ut.appendTo(e),bt.appendTo(e),mt.appendTo(e)}function $(e){r.setToolbarPosition(e),J(),r.getToolbarPosition()===d.toolbarPosition().SELF_ADJUST||r.getToolbarPosition()===d.toolbarPosition().HORIZONTAL?(pt.css("grid-template-rows","40px 40px auto"),Tt.css("grid-template-columns","fit-content(0) auto 214px;"),Dt.css("visibility","hidden"),It.css("visibility","hidden"),ht.css("visibility","hidden"),ft.css("visibility","visible"),vt.css("height","32px"),X(ft),yt.removeClass("startHereVTip"),yt.addClass("startHereHTip")):r.getToolbarPosition()===d.toolbarPosition().VERTICAL&&(pt.css("grid-template-rows","40px 10px auto"),Tt.css("grid-template-columns","fit-content(0) auto 214px;"),ft.css("visibility","hidden"),Dt.css("visibility","visible"),It.css("visibility","visible"),ht.css("visibility","visible"),vt.css("height","2px"),X(ht),yt.removeClass("startHereHTip"),yt.addClass("startHereVTip"))}function Q(){var t=e(window).scrollTop(),a=document.getElementById("screenId").offsetWidth;Dt.css("height",t+"px"),ht.css("top",t+"px"),t>Ct?r.getToolbarPosition()!==d.toolbarPosition().SELF_ADJUST&&r.getToolbarPosition()!==d.toolbarPosition().HORIZONTAL||$(d.toolbarPosition().VERTICAL):r.getToolbarPosition()===d.toolbarPosition().VERTICAL&&a>wt&&$(d.toolbarPosition().HORIZONTAL)}function ee(){ie.flowTabVisible(!1),ie.erdTabVisible(!1),ie.logTabVisible(!1),ie.procTabVisible(!1)}function te(){var e=document.getElementById("containerId").clientWidth;oe.width>e&&r.hasShowBottomMessages()&&ie.showBottomMessage("Drag the mouse on canvas to scroll")}function ae(){var t=e(window).height();e(window).scrollTop();Pt.height(t-Ot)}var ie=this,oe=document.getElementById("canvasId"),ne=document.getElementById("canvasThId"),se=oe.getContext("2d"),re=document.getElementById("containerId"),le=document.getElementById("topContainerId"),de=e("#openFlowDialogId"),ce=e("#spinnerLevelsId"),ge=e("#spinnerLanesId"),ue=(e("#spinnerSpaceId"),e("#confirmDialogId")),be=e("#confirmDialog2Id"),me=e("#confirmSrvDialogId"),pe=(e("#thumbnailDialogId"),document.getElementById("scaleId")),ve=e("#nodePropsTabId"),Te=document.getElementById("paletteCtrId"),fe="[Select Diagram Type, then Start...| Open...| Template...]",Ie=!1,he=!1,De=!1;ie.cnxOn=i.observable(d.cnxOn()),ie.cnxOff=i.observable(d.cnxOff()),ie.diagramTextOn=i.observable(O.getDiagramTextON()),ie.diagramTextOff=i.observable(O.getDiagramTextOFF()),ie.diagramTextFLOW=i.observable(O.getDiagramTextFLOW()),ie.diagramTextERD=i.observable(O.getDiagramTextERD()),ie.diagramTextLOG=i.observable(O.getDiagramTextLOG()),ie.diagramEndText=i.observable(O.getDiagramEndText()),ie.diagramAllText=i.observable(O.getDiagramTextAll()),ie.accHdrFlowTitle=i.observable(d.appTitles().FLOW_TITLE),ie.accHdrSideTitle=i.observable(d.appTitles().SIDE_TITLE),ie.accHdrMiscTitle=i.observable(d.appTitles().MISC_TITLE),ie.accHdrERDTitle=i.observable(d.appTitles().DB_ERD_TITLE),ie.accHdrLOGTitle=i.observable(d.appTitles().DB_LOG_TITLE),ie.accHdrPROCTitle=i.observable(d.appTitles().PROCESS_TITLE),ie.accHdrPagesTitle=i.observable(d.appTitles().PAGES_TITLE),ie.accHdrBpelTitle=i.observable(d.appTitles().BPEL_TITLE),ie.accHdrK8sTitle=i.observable(d.appTitles().K8S_TITLE),ie.getCanvas=function(){return oe},ie.setCanvas=function(e){oe=e},ie.getCanvasContext=function(){return se},ie.getCanvasTh=function(){return ne},ie.setCanvasTh=function(e){ne=e},ie.getCanvasContext=function(){return se},ie.getCanvasContainer=function(){return re},ie.manager=new T(ie),ie.interactor=ie.manager.getMouseInteractor(),ie.dndHandler=ie.manager.getDnDHandler(),ie.updateTrigger=i.observable(!1);var ye=new I(ie);ie.getFlowManager=function(){return ie.manager},ie.isConnectionOK=i.observable(!1),ie.cnxResultOK=function(){ie.showOverlayMessage("Connected to server",1e3),ie.isConnectionOK(!0),setTimeout(function(){ie.updateWindow()},200),ie.isFirstCall(!0),ie.manager.getInstallSettings(),ie.callStartPage(!0),ie.cnxInfo(!0)},ie.setCnxValue=function(t,a){ie.isConnectionOK(t),ie.cnxInfo(t),a&&(ie.showOverlayMessage(t?"Connected to server":"No server connection",1e3),ie.isFirstCall(!0),ie.manager.getInstallSettings(),ie.callStartPage(!0)),setTimeout(function(){ie.updateWindow()},200),t||(ie.showOverlayMessage("No server connection",1200),a||(e(".ui-dialog-content").dialog("close"),ie.callStartPage(!0)),setTimeout(function(){console.clear()},2e3))},ie.cnxResultFAIL=function(e){ie.showOverlayMessage("No server connection",1e3),ie.isConnectionOK(!1),setTimeout(function(){console.clear(),ie.updateWindow()},200),ie.isFirstCall(!0),ie.manager.getInstallSettings(),ie.callStartPage(!0),ie.cnxInfo(!1)},ie.cnxInfo=i.observable(!1),ie.isFirstCall=i.observable(!1),e(document).ready(function(){function t(e){ie.isDgmFlow(e)}function a(t){return e("<img>",{style:"margin: 0 6px -2px -22px;",src:g.getIconURL(t.value)})}function o(t){return e("<img>",{style:"margin: 0 6px -2px 0;",src:g.getIconURL(t.value)})}function n(t){return e("<img>",{style:"margin: 0px 6px 2px 10px; ",src:u.getPortIconURL(t.value)})}function c(t){return e("<img>",{style:"margin: 0 6px -2px 6px; background-color: white; }",src:u.getPortIconURL(t.value)})}se.canvas.width=0,se.canvas.height=0,D.initDialog(ie.manager),y.initDialog(ie.manager),w.initDialog(ie.manager),V.initDialog(ie.manager),C.initDialog(ie.manager),E.initDialog(ie.manager),N.initDialog(ie.manager),S.initDialog(ie.manager),L.initDialog(ie.manager),F.initDialog(ie.manager),k.initDialog(ie.manager),M.initDialog(ie.manager),R.initDialog(ie.manager),A.initDialog(ie.manager),P.initDialog(ie.manager),s.initButtons(ie),l.initActions(ie),e("#startLogoBtnId").attr("disabled",!0),e("#aboutLogoBtnId").attr("disabled",!0),e("#canvasId").contextmenu(ie.interactor.getContextMenu()),le.addEventListener("mousemove",function(t){ie.interactor.isOverCanvas(t)||(e("#canvasId").contextmenu("close"),ie.manager.getFlowDiagram().setMousePoint(void 0))}),e("#paletteAccordionId").accordion({heightStyle:"fill",animate:{easing:"swing",duration:200},collapsible:!0,create:function(t,a){e(".ui-accordion-header").css("background","#b5e0fd"),e(".ui-accordion-header").css("height","12"),e(".ui-accordion-header.ui-state-active ").css("background","#408DEE")},activate:function(t,a){e(".ui-accordion-header").css("background","#b5e0fd"),e(".ui-accordion-header.ui-state-active ").css("background","#408DEE");a.newHeader.context&&a.newHeader.context.innerText;ie.updateWindow()}}),setTimeout(function(){e("#paletteAccordionId").accordion("option","icons",{header:"ui-icon-triangle-1-e",activeHeader:"ui-icon-triangle-1-s"})},100),e("#accTableFlowId").height(262),e("#accTableMiscsId").height(184),e("#accTableERDId").height(80),e("#accTableLOGId").height(184),e("#accTablePROCId").height(28),ie.isDgmFlow=i.observable(!1),e("#btnDgmModeDId").click(function(e,a){t(!0)}),e("#btnDgmModeUId").click(function(e,a){t(!1)}),ie.hasDiagram=i.observable(!1),ie.setDiagramOpen=function(e){ie.hasDiagram(e)},e("#settingsTabId").tabs({}),e("#integrationTabId").tabs({}),e("textarea").keydown(function(t){33==t.which&&(window.scrollTo(0,window.scrollY),t.preventDefault(),t.target.setSelectionRange(0,0),e(this).scrollTop(0)),34==t.which&&(window.scrollTo(0,window.scrollY),t.preventDefault(),textareaLength=e(this).val().length,t.target.setSelectionRange(textareaLength,textareaLength),e(this).scrollTop(9999))}),ve.tabs({activate:function(e,t){1===t.newTab.index()?ve.css({overflow:"auto"}):ve.css({overflow:"hidden"})}}),e("#infoTextId").attr("visibility","hidden");var b=e("#progressBarId");b.progressbar({value:!1}),b.height(14),e.widget("nodeIcons.iconselectmenu",e.ui.selectmenu,{_renderButtonItem:function(t){var a=e("<div>",{text:g.getIconLabel(t.value)});return o(t).prependTo(a),a},_renderItem:function(t,i){var o=e("<li>"),n=e("<div>",{text:g.getIconLabel(i.value)});return a(i).prependTo(n),o.append(n).appendTo(t)},_renderMenu:function(t,a){var i=this,o=g.getOptionItems(a);e.each(o,function(e,a){i._renderItemData(t,a)})},refreshButtonItem:function(e,t){if(r.getDiagramType()===d.diagramType().FLOWCHART){var a=g.getIndexValue(e,t);this.element[0].selectedIndex=a,this.refresh()}}}),e("#nodeIconItemsId").iconselectmenu().iconselectmenu("menuWidget").addClass("ui-menu-icons customicons"),e("#settingIconItemsId").iconselectmenu().iconselectmenu("menuWidget").addClass("ui-menu-icons customicons"),e.widget("portImages.porticonmenu",e.ui.selectmenu,{_renderButtonItem:function(t){var a=e("<div>",{style:"padding-left: 16px; height: 16px; width: 100px; background-color: white"});return n(t).prependTo(a),a},_renderItem:function(t,a){var i=e("<li>"),o=e("<div>",{style:"height: 16px; width: 120px"});return c(a).prependTo(o),i.append(o).appendTo(t)},_renderMenu:function(t,a){var i=this,o=u.getPortOptionItems(a);e.each(o,function(e,a){i._renderItemData(t,a)})},refreshButtonItem:function(e){var t=u.getPortIndexValue(e);this.element[0].selectedIndex=t,this.refresh()}}),e("#selectPortIconsId").porticonmenu().porticonmenu("menuWidget").addClass("ui-menu-icons porticons"),e.widget("settings.schemenames",e.ui.selectmenu,{_renderButtonItem:function(t){return e("<div>",{text:t.value})},_renderItem:function(t,a){var i=e("<li>"),o=e("<div>",{text:a.value});return i.append(o).appendTo(t)},_renderMenu:function(t,a){var i=this,o=ie.manager.getSettingsManager().getOptionsPicker().getOptions();e.each(o,function(e,a){i._renderItemData(t,a)})},refreshButtonItem:function(e){var t=ie.manager.getSettingsManager().getOptionsPicker().getIndex(e);this.element[0].selectedIndex=t,this.refresh()}}),e("#settingSchemesId").schemenames({width:240}).schemenames("menuWidget").addClass("ui-menu-icons schemenames"),e("#selectPartitionId").selectmenu({select:function(e,t){if(e.currentTarget){var a=e.currentTarget.textContent;console.log("$$$ disk select: "+a),ie.selectedPartition(a)}},change:function(e,t){e.currentTarget.textContent},create:function(e,t){setTimeout(function(){ie.manager.getDiskNames()},1e3)}}).addClass("settingsDiskMenu").css("fontSize","16px"),e("#selectFileTypeId").selectmenu({create:function(t,a){setTimeout(function(){ie.selectedFileType(d.fileTypes().ALL),e("#selectFileTypeId").selectmenu("refresh")},1e3)},select:function(e,t){if(e.currentTarget){var a=e.currentTarget.textContent;ie.selectedFileType(a),ie.manager.getDirContent()}}}).addClass("settingsDiskMenu"),e.widget("dbScripts.inOutmenu",e.ui.selectmenu,{_renderButtonItem:function(t){return e("<div>",{text:t.label})},_renderItem:function(t,a){var i=e("<li>"),o=e("<div>",{text:a.label});return i.append(o).appendTo(t)}}),e("#importExportId").inOutmenu({icons:{button:"ui-icon-blank"},width:160,background:"white",select:function(e,t){E.setDBSelected(document.getElementById("importExportId").value)}}).inOutmenu("menuWidget"),ie.refreshImportMenu=function(){e("#importExportId").inOutmenu("refresh")},e.widget("demomenu.demofilesmenu",e.ui.selectmenu,{_renderButtonItem:function(t){return e("<div>",{text:t.label})},refreshButtonItem:function(e){this.refresh()}}),e("#selectFileId").demofilesmenu().demofilesmenu("menuWidget").addClass("ui-menu-icons demofiles"),e("#flowMenuId").demofilesmenu().demofilesmenu("menuWidget").addClass("ui-menu-icons demofiles"),e("#dbMenuId").demofilesmenu().demofilesmenu("menuWidget").addClass("ui-menu-icons demofiles"),e("#logMenuId").demofilesmenu().demofilesmenu("menuWidget").addClass("ui-menu-icons demofiles"),e("#procMenuId").demofilesmenu().demofilesmenu("menuWidget").addClass("ui-menu-icons demofiles"),e("#cnstrDBTypeId").selectmenu(),e("#dbCPKTypeId").selectmenu(),e("#dbCPKCol1").selectmenu(),e("#dbCPKCol2").selectmenu(),e("#dbCPKCol3").selectmenu(),e.widget("dbScripts.cstrtypes",e.ui.selectmenu,{_renderButtonItem:function(t){return e("<div>",{text:t.label})},_renderItem:function(t,a){var i=e("<li>"),o=e("<div>",{text:a.label});return i.append(o).appendTo(t)},_renderMenu:function(t,a){var i=this;e.each(a,function(e,a){i._renderItemData(t,a)})}}),e("#cnstrDBTypeId").cstrtypes({icons:{button:"ui-icon-caret-1-s"},width:18}).cstrtypes("menuWidget").addClass("ui-menu-icons cstrtypes")}),ie.startHereVisible=i.pureComputed(function(){return!ie.hasDiagram()&&!ie.isStartPage()&&!ie.hasDialogsOpen()}),ie.hasDialogsOpen=i.observable(!1),ie.setHasDialogsOpen=function(e){ie.hasDialogsOpen(e),e||ie.hasDiagram()||ie.manager.clearDiagram(!0)},ie.disableInactiveTypeButtons=function(e){e?r.getDiagramType()===d.diagramType().ERD_DB?(document.getElementById("btnFlowId").disabled=e,document.getElementById("btnERDId").disabled=!e):r.getDiagramType()===d.diagramType().ERD_LOG?(document.getElementById("btnFlowId").disabled=e,document.getElementById("btnERDId").disabled=e):(document.getElementById("btnFlowId").disabled=!e,document.getElementById("btnERDId").disabled=e):(document.getElementById("btnFlowId").disabled=e,document.getElementById("btnERDId").disabled=e)},ie.diagramTypeFlow=i.observable(d.diagramTypeText().FLOWCHART),ie.diagramTypeERD=i.observable(d.diagramTypeText().ERD_DB),ie.diagramTypeLOG=i.observable(d.diagramTypeText().ERD_LOG),ie.diagramTypeProc=i.observable(d.diagramTypeText().PROCESS),ie.enforceDiagramType=function(t){t===d.diagramTypeText().ERD_DB?(e("#btnERDId").prop("checked",!0),r.setDiagramType(d.diagramType().ERD_DB),r.setFlowDirection(d.flow().VERTICAL),ie.isHorizontal(!1),e("#btnVertical").prop("checked",!0),document.getElementById("btnHorizontal").disabled=!0,document.getElementById("btnFlowVId").disabled=!0,e("#paletteAccordionId").accordion("option","active",2),r.setShowNodeTasks(!1),r.setShowDBRecords(!0),r.setShowCardinality(!0),r.setShowRefHandles(!1),r.setShowNodeIcons(!1),r.setHideNodeNames(!1),r.setLinkStyle(d.linkStyle().STRAIGHT_LINE),r.setSegmentsGap(d.segmentsGap().MAX),r.setGridSpace(d.gridSpace().MAX),ie.isFirstCall(!1),ie.setERDTabVisible(),ie.selectedDBName().length):(e("#btnFlowId").prop("checked",!0),r.setDiagramType(d.diagramType().FLOWCHART),e("#btnHorizontal").prop("disabled",!1),document.getElementById("btnFlowVId").disabled=!1,e("#paletteAccordionId").accordion("option","active",0),r.setSegmentsGap(d.segmentsGap().MIN),r.setGridSpace(d.gridSpace().MIN),r.setHideNodeNames(!1),r.setShowDBRecords(!1),r.setShowCardinality(!1),r.setShowNodeTasks(!1),r.setLinkStyle(d.linkStyle().SINGLE_ARROW),ie.isFirstCall(!1),ie.showDBName(!1),ie.selectedDBName(""),ie.setFlowTabVisible()),ie.disableInactiveTypeButtons(!0),ie.updateWindow()},ie.showIconSelection=i.pureComputed(function(){return r.getDiagramType()===d.diagramType().FLOWCHART}),ie.dbsToImport=i.observableArray(E.currentDBTypes()),ie.dbsToExport=i.observableArray(E.currentDBTypes()),ie.showDBName=i.observable(!1),ie.selectedDBName=i.observable(""),ie.dbCallParams={},ie.isSelectedMySQL=i.computed(function(){return ie.selectedDBName()===v.mysql()}),ie.isSelectedT_SQL=i.computed(function(){return ie.selectedDBName()===v.t_sql()}),ie.dbSchemaName=i.observable(""),ie.callInOutDialog=function(){e("#importExportDialogId").dialog("open")},ie.isAutoLayoutAllowed=i.observable(r.isAllowAuto()),ie.dbNodeRecords=i.observableArray(),ie.showDBTableEditorOnLeft=i.observable(!1),ie.showDBCardinalityOnLeft=i.observable(!1),ie.showDBTable=i.observable(!0),ie.dbTableErrorMsg=i.observable(!1),ie.dbColumnKeys=i.observableArray(ie.manager.getDBTableEditor().dbColumnKeys()),ie.keyId=i.observable(""),ie.dbDataColumnTypes=i.observableArray(ie.manager.getDBTableEditor().dbColumnTypes()),ie.typeId=i.observable(""),ie.dbTableLength=i.observable(""),ie.showDBConstraints=i.observable(!1),ie.dbTableConstraints=i.observableArray(ie.manager.getDBTableEditor().dbTypeConstraints()),ie.showDBKeys=i.observable(!0),ie.showDBIndexes=i.observable(!1),ie.dbTableIndexes=i.observableArray(),ie.dbCompositePKs=i.observableArray(),ie.dbCompositePKTypes=i.observableArray(),ie.showDBCompositePK=i.observable(!0),ie.compositePKColumns=i.observableArray(),ie.isDefault=function(e){return console.log(e),"DEFAULT"!==e},ie.showDecisionEditorOnLeft=i.observable(!1),ie.nodeEmojiItems=i.pureComputed(function(){return g.getNodeIconOptions()}),ie.portIcons=i.pureComputed(function(){return u.getPortIconOptions()}),ie.cardinalityItems=i.pureComputed(function(){return b.getCardinalityList()}),ie.enableShowCardinality=i.observable(!1),ie.setEnableShowCardinality=function(e){ie.enableShowCardinality(e)},ie.enableShowDB=i.observable(!1),ie.setEnableShowDB=function(e){ie.enableShowDB(e)},ie.onOpsActionChange=function(e){},ie.isProgressBarVisible=i.observable(!1),ie.isProgressBarVisible.extend({notify:"always"}),ie.setProgressBarVisible=function(e){ie.isProgressBarVisible(e)},ie.showPageMode=i.observable(r.hasPageMode()),ie.isCanvasVisible=i.observable(!1),ie.setCanvasVisible=function(e){ie.isCanvasVisible(e)},ie.scaleValue=i.observable(r.getScale()),e("#scaleId").slider(),pe.oninput=function(){r.setScale(this.value/d.scale().FACTOR),ie.scaleValue(r.getScale()),ie.manager.clearClipboard(),ie.manager.getFlowDiagram().clearCanvas(),ie.manager.rebuildFlowData()},ie.editModeText=i.observable(r.isEditMode()?d.editModeText().EDIT:d.editModeText().VIEW),ie.setEditModeText=function(e){e===d.editMode().EDIT_ALL?ie.editModeText(d.editModeText().EDIT):ie.editModeText(d.editModeText().VIEW)},ie.setTooltipBox=function(e,t){e.length>0&&r.isEditMode()&&1===r.getScale()&&K.drawTooltip(se,oe.getBoundingClientRect(),t,e)},ie.showTooltipBox=function(e){},ie.getCurrentShortFileName=function(){var e=ie.manager.getFileName(),t=e.indexOf(".json"),a=e.substring(0,t),i=a.lastIndexOf("/");return a.substring(i+1)};var we,Ce=document.getElementById("blockResizeId"),Ee=e("#extendBlockAcrossId"),Ne=e("#extendBlockAlongId"),Se=e("#shrinkBlockAcrossId"),xe=e("#shrinkBlockAlongId");ie.showBlockResizeBar=function(e){var t=e.getExpandedShape(),a=r.getScale();Ce.style.left=oe.getBoundingClientRect().left+t.x*a+"px",Ce.style.top=oe.getBoundingClientRect().top+t.y*a-24+"px",Ee.attr("disabled",!r.isEditMode()||!e.canExtendAcross()),Ne.attr("disabled",!r.isEditMode()||!e.canExtendAlong()),Se.attr("disabled",!r.isEditMode()||!e.canShrinkAcross()),xe.attr("disabled",!r.isEditMode()||!e.canShrinkAlong()),Ce.style.visibility="visible"},ie.doResizeContainer=function(e){var t=ie.getFlowManager().getSelectionManager().getSelections();t[0].getFlowType()===d.flowType().CONTAINER&&t[0].resizeOutline(e),Ce.style.visibility="hidden",we=!1},ie.isBlockResizeBarVisible=function(){return we},ie.hideContainerBar=function(){Ce.style.visibility="hidden"};var Le,Be=document.getElementById("switchResizeId"),Oe=e("#extendSwitchAcrossId"),Pe=e("#shrinkSwitchAcrossId");ie.showSwitchResizeBar=function(e){var t=e.getMenuBarPosition(),a=r.getScale();Be.style.left=oe.getBoundingClientRect().left+t.x*a+"px",Be.style.top=oe.getBoundingClientRect().top+t.y*a-24+"px",Oe.attr("disabled",!r.isEditMode()||!e.canExtendAcross()),Pe.attr("disabled",!r.isEditMode()||!e.canShrinkAcross()),Be.style.visibility="visible"},ie.doResizeSwitch=function(e){var t=ie.getFlowManager().getSelectionManager().getSelections();t[0].getFlowType()===d.flowType().SWITCH&&t[0].resizeOutline(e),Be.style.visibility="hidden",Le=!1},ie.isSwitchResizeBarVisible=function(){return Le},ie.hideSwitchBar=function(){Be.style.visibility="hidden"},ie.showSearchList=i.observable(!1),ie.showFindOptions=i.observable(!0),ie.searchContentList=i.observableArray(),ie.foundMatches=i.observable(),ie.onFindTableClick=function(e){var t=e.target.innerText;N.selectedNewDisk(t)},ie.onFindTableDblClick=function(e){ie.onFindTableClick(e)},ie.onPasteSearchText=function(e){N.selectedNewDisk(label)},ie.currentPath=i.observable(),ie.fsContentList=i.observableArray(),ie.selectedPath=i.observable(),ie.isOpenMode=i.observable(),ie.isSaveMode=i.observable(),ie.isImportDBMode=i.observable(),ie.isStartDBMode=i.observable(),ie.isExportDBMode=i.observable(),ie.showPartitions=i.observable(!1),ie.partitionsList=i.observableArray([""]),ie.selectedPartition=i.observable(),ie.filesTypes=i.observableArray([d.fileTypes().JSON,d.fileTypes().ALL]),ie.selectedFileType=i.observable(d.fileTypes().JSON);ie.onLogoClick=function(e){},ie.showTemplatesOnly=i.observable(!1),ie.setShowTemplatesOnly=function(e){ie.showTemplatesOnly(e)},ie.callOpenFlowDialog=function(t,a){if(t){if(ie.setFSDialogMode(d.fsDialogMode().OPEN),ie.setShowTemplatesOnly(!0),r.getDiagramType()===d.diagramType().FLOWCHART)ie.flowTemplates(ie.manager.getTemplates().getFlowTemplatesList()),e("#flowMenuId").demofilesmenu("refresh");else if(r.getDiagramType()===d.diagramType().ERD_DB){if(!ie.selectedDBName())return void ie.callInOutDialog();ie.dbTemplates(ie.manager.getTemplates().getDBTemplatesList(ie.selectedDBName())),e("#dbMenuId").demofilesmenu("refresh")}else r.getDiagramType()===d.diagramType().ERD_LOG&&(ie.logTemplates(ie.manager.getTemplates().getLOGTemplatesList()),e("#logMenuId").demofilesmenu("refresh"));de.dialog("open"),de.dialog({height:180})}else a===d.importExportMode().IMPORT?(ie.setShowTemplatesOnly(!1),setTimeout(function(){ie.isConnectionOK()&&(de.dialog({height:440}),ie.manager.getRootDir(),de.dialog("open"))},20)):a===d.importExportMode().START?(ie.setShowTemplatesOnly(!1),setTimeout(function(){ie.isConnectionOK()&&(de.dialog("open"),de.dialog({height:180}))},20)):(ie.setShowTemplatesOnly(!1),setTimeout(function(){ie.isConnectionOK()?de.dialog({height:440}):de.dialog({height:180}),ie.manager.getRootDir(),de.dialog("open")},20))},ie.onDiskTableClick=function(e){var t=e.target.innerText;w.selectedNewDisk(t)},ie.setFSDialogMode=function(e){ye.setFSDialogMode(e),ie.fsDialogMode(e)},ie.getFSDialogMode=function(){return ye.getFSDialogMode()},ie.fsDialogMode=i.observable(),ie.restoreWorkDir=function(){ye.restoreWorkDir()},ie.setWorkDir=function(e){ye.setWorkDir(e)},ie.getWorkDir=function(){return ye.getWorkDir()},ie.getSelectedFSDir=function(){return ye.getSelectedFSDir()},ie.getSelectedFSFile=function(){return ye.getSelectedFSFile()},ie.onDirTableClick=function(e){ye.onDirTableClick(e)},ie.deleteFSItem=function(){ye.deleteFSItem()},ie.onDirTableDblClick=function(e){ye.onDirTableDblClick(e)},ie.updateMainFSLocation=function(){ye.updateMainFSLocation()},ie.goOneDirBack=function(){ye.goOneDirBack()},ie.setDirsList=function(e,t){ye.setDirsList(e,t)},ie.setFolderContent=function(e,t){ye.setFolderContent(e,t)},ie.onFileTypeChange=function(e){ye.onFileTypeChange(e)},ie.showForegroundSelection=i.observable(!0),ie.showBackgroundSelection=i.observable(!0),ie.settingsSchemes=i.observableArray([]),ie.removeFromSettingsSchemes=function(e){for(var t=-1,a=0;a<ie.settingsSchemes().length;a++)if(ie.settingsSchemes()[a]===e){t=a;break}a>-1?ie.settingsSchemes.splice(t,1):alert("bad index for settingsSchemes: "+t)};var Fe;ie.setNewAction=function(e){Fe=e},ie.isNewAction=function(){return Fe},ie.filesList=i.observableArray();var ke=[];ie.setFilesList=function(t){if(ke=t,ie.filesList(t),ie.filesList(Z(t)),Fe)e("#newFlowDialogId").dialog("open");else;},ie.selectedFile=i.observable(),ie.getSelectedFile=function(){return ie.isConnectionOK()?_selectedFile:ie.selectedFile()},ie.isInputInvalid=i.observable(!1),ie.validateMessage=i.observable(""),ie.newFSNameValue=i.observable(""),ie.nameValueEmpty=i.observable(""),ie.validateFSName=function(t,a){var i=_.trimMultipleSpaces(ie.newFSNameValue()),o=a?n.getDirectoriesLabels():ie.filesList();ie.nameValueEmpty(0===i.length);var s=(ie.isInputInvalid(),_.containsFSName(o,i)),r=_.isFSNameValid(ie.newFSNameValue()),l=i.length>0&&(!r||s);ie.isInputInvalid(l),e("#newFlowButtonOK").button("option","disabled",ie.isInputInvalid()||ie.nameValueEmpty()),e("#newFolderButtonOK").button("option","disabled",ie.isInputInvalid()||ie.nameValueEmpty()),r?s?ie.validateMessage("Duplicate name"):ie.validateMessage(""):ie.validateMessage("Only alphanumericals, slashes, dots, dashes, underscores"),t&&i.length>0&&r&&"Enter"===t.code&&(Fe?(D.createNewDiagram(ie.manager),e("#newFlowDialogId").dialog("close")):(y.createNewFolder(ie.manager),e("#newFolderDialogId").dialog("close")))},ie.saveAsInputInvalid=i.observable(!1),ie.saveAsMessage=i.observable(""),ie.saveAsFileNameValue=i.observable(""),ie.saveAsNameEmpty=i.observable(""),ie.validateSaveAsFileName=function(e){var t=_.trimMultipleSpaces(ie.editNameValue());if(t.length>0){var a=_.containsFSName(ie.filesList(),t),i=_.isFSNameValid(t),o=!a&&i;ie.isEditNameInvalid(!o)}a?ie.validateNameMessage("Duplicate name"):i?ie.validateNameMessage(""):ie.validateNameMessage("Only alphanumericals, slashes, dots, dashes, underscores")},ie.saveAsNewVersion=i.observable(1),ie.versionInputInvalid=i.observable(!1),ie.validateAsVersion=function(e){var t=(ie.saveAsNewVersion(),_.isVersionNumber(ie.saveAsNewVersion()));ie.versionInputInvalid(!t),Y()},ie.isFlowSaveBlocked=function(){return ie.saveAsInputInvalid()||ie.saveAsNameEmpty()||ie.saveAsNewVersion()&&ie.versionInputInvalid()};var Me=i.observable();ie.propsLinkSourceName=i.observable(),ie.propsLinkSourceLabel=i.observable(),ie.propsLinkTargetName=i.observable(),ie.propsLinkTargetLabel=i.observable(),ie.propsLinkLabel=i.observable(),ie.getPropsLink=function(){return Me()},ie.getPropsLinkLabelValue=function(){return ie.propsLinkLabel()},ie.showLinkProps=function(t){Me(t),ie.propsLinkSourceName(Me().getLinkSourcePortName()),ie.propsLinkSourceLabel(Me().getLinkSourcePortLabel()),ie.propsLinkTargetName(Me().getLinkTargetPortName()),ie.propsLinkTargetLabel(Me().getLinkTargetPortLabel()),ie.propsLinkLabel(Me().getLinkLabel()),e("#linkPropsDialogId").dialog("open")},ie.propsFgndVisible=i.observable(!0),ie.setPropsFgndVisible=function(e){ie.propsFgndVisible(e)},ie.propsNodeInputs=i.observableArray();var Re,Ae;ie.getPropsNodeInputsIdx=function(){return Re},ie.getPropsNodeInputsValue=function(){return Ae},ie.propsNodeOutputs=i.observableArray();var Ve,He;ie.getPropsNodeOutputsIdx=function(){return Ve},ie.getPropsNodeOutputsValue=function(){return He},ie.propsNodeRefInputs=i.observableArray();var _e,Ke;ie.getPropsNodeRefInputsIdx=function(){return _e},ie.getPropsNodeRefInputsValue=function(){return Ke},ie.propsNodeRefOutputs=i.observableArray();var We,Ge;ie.getPropsNodeRefOutputsIdx=function(){return We},ie.getPropsNodeRefOutputsValue=function(){return Ge};var ze=i.observable();ie.setPropsNode=function(e){ze(e)},ie.getPropsNode=function(){return ze()},ie.propsNodeName=i.computed(function(){return ze()?ze().getName():"?"},this),ie.showNodeProps=function(t){ze(t),t.getFlowType()===d.flowType().DB_TABLE&&t.closeDBEditors(),g.setNodeCategory(t.getNodeCategory()),ie.propsNodeInputs(ze().getInputPortsProperties()),ie.propsNodeOutputs(ze().getOutputPortsProperties()),ie.propsNodeRefInputs(ze().getRefInPortsProperties()),ie.propsNodeRefOutputs(ze().getRefOutPortsProperties()),ie.dbNodeRecords(ze().getDBRecords()),e("#nodePropsDialogId").dialog("open")},ie.dbEditorPath=i.observable("?"),ie.setDBEditorPath=function(e){dbEditorPath(e)};var Ue=i.observable();ie.setPropsPort=function(e){Ue(e)},ie.getPropsPort=function(){return Ue()},ie.propsPortName=i.observable(""),ie.editPropsNodeInputLabel=function(e){Re=e.target.parentNode.parentNode.rowIndex;var t=document.getElementById("nodeInputsTableId"),a=t.getElementsByTagName("tr");Ae=a[Re].cells[2].getElementsByTagName("input")[0].value},ie.checkPortInputCardinality=function(e){C.editPortInputCardinality(e)},ie.editPropsNodeOutputLabel=function(e){Ve=e.target.parentNode.parentNode.rowIndex;var t=document.getElementById("nodeOutputsTableId"),a=t.getElementsByTagName("tr");He=a[Ve].cells[2].getElementsByTagName("input")[0].value},ie.checkPortOutputCardinality=function(e){C.editPortOutputCardinality(e)},ie.editPropsNodeRefInputLabel=function(e){_e=e.target.parentNode.parentNode.rowIndex;var t=document.getElementById("nodeRefInputsTableId"),a=t.getElementsByTagName("tr");Ke=a[_e].cells[2].getElementsByTagName("input")[0].value},ie.checkPortRefInputCardinality=function(e){C.editPortRefInputCardinality(e)},ie.editPropsNodeRefOutputLabel=function(e){We=e.target.parentNode.parentNode.rowIndex;var t=document.getElementById("nodeRefOutputsTableId"),a=t.getElementsByTagName("tr");Ge=a[We].cells[2].getElementsByTagName("input")[0].value},ie.checkPortRefOutputCardinality=function(e){C.editPortRefOutputCardinality(e)},ie.isEditNameInvalid=i.observable(!1),ie.editNameValue=i.observable(""),ie.newFlowNameValue=i.observable(""),ie.validateNameMessage=i.observable("");var Ze;ie.setOldName=function(e){Ze=e},ie.validateInlineNodeName=function(){var e=ie.manager.getInlineInputEditor().getCurrentValue(),t=_.trimMultipleSpaces(e);ie.validateEditName(t)},
ie.validateDialogNodeName=function(){var e=_.trimMultipleSpaces(ie.editNameValue());ie.validateEditName(e)},ie.validateNewFlowName=function(){var e=_.trimMultipleSpaces(ie.editNameValue());ie.validateEditName(e)},ie.validateNewFolderName=function(){var e=_.trimMultipleSpaces(ie.editNameValue());ie.validateEditName(e)},ie.validateEditName=function(e){if(e.length>0){var t=_.getAllNames(ie.manager.getNodeNamesMap()),a=_.isDuplicateName(Ze,e,t),i=_.isNewNodeNameValid(e),o=!a&&i;ie.isEditNameInvalid(!o)}a?ie.validateNameMessage("Duplicate name"):i?ie.validateNameMessage(""):ie.validateNameMessage("Only alphanumericals, slashes, dots, dashes, underscores")},ie.isSchemeNameInvalid=i.observable(!1),ie.schemeNameValue=i.observable(""),ie.validateSchemeMessage=i.observable(""),ie.validateSchemeName=function(){var e=document.getElementById("newSchemeId").value;if(e.length>0){var t=ie.manager.getSettingsManager().getSchemeNames(),a=t.includes(e),i=_.isSchemeNameValid(e),o=!a&&i;ie.isSchemeNameInvalid(!o)}else ie.isSchemeNameInvalid(!1);a?ie.validateSchemeMessage("Duplicate name"):i?ie.validateSchemeMessage(""):ie.validateSchemeMessage("Only alphanumericals, dots, dashes and underscores")},ie.isLinkLabelInvalid=i.observable(!1),ie.linkLabelValue=i.observable(""),ie.validateLinkMessage=i.observable("");var Ye;ie.setOldLinkLabel=function(e){Ye=e},ie.validateLinkLabelName=function(e){var t=_.trimMultipleSpaces(ie.linkLabelValue());if(t.length>0){var a=t===Ye||_.isNewLinkLabelValid(t);ie.isLinkLabelInvalid(!a)}else ie.isLinkLabelInvalid(!1);a?ie.validateLinkMessage(""):ie.validateLinkMessage("Only alphanumericals, slashes, dots, dashes, underscores")},ie.isFieldInvalid=i.observable(!1),ie.fieldValue=i.observable(""),ie.validateFieldMessage=i.observable(""),ie.validateFieldName=function(){var e=document.getElementById("inputFieldId").value;if(e.length>0){var t=ie.manager.getDBTableEditor().getDBRecordsFields(),a=ie.manager.getDBTableEditor().getOldFieldValue(),i=t.includes(e),o=_.isDBFieldValid(e),n=e===a||!i&&o;ie.isFieldInvalid(!n)}else ie.isFieldInvalid(!1);i?ie.validateFieldMessage("Duplicate field"):o?ie.validateFieldMessage(""):ie.validateFieldMessage("Only alphanumericals, dots, dashes and underscores")},ie.isKeyInvalid=i.observable(!1),ie.validateKeyMessage=i.observable(""),ie.validateKeyValue=function(){var e=document.getElementById("inputKeyId").value,t=ie.manager.getDBTableEditor().getLabelById(ie.manager.getDBTableEditor().dbColumnKeys(),e);if(ie.isKeyInvalid(!1),t.length>0){var a=ie.manager.getDBTableEditor().getDBRecordsKeys(),i="PK"===t&&a.includes(t);ie.isKeyInvalid(i)}return i?ie.validateKeyMessage("Only composite primary key is allowed"):ie.validateKeyMessage(""),!i},ie.isCPKNameInvalid=i.observable(!1),ie.fieldCPKValue=i.observable(""),ie.validateCPKMessage=i.observable(""),ie.validateCPKName=function(){var e=ie.manager.getDBTableEditor().getNewCPKName();if(e.length>0){var t=ie.manager.getDBTableEditor().getOldCPKName(),a=_.isDBFieldValid(e),i=e===t||a;ie.isCPKNameInvalid(!i)}else ie.isCPKNameInvalid(!1);a?ie.validateCPKMessage(""):ie.validateCPKMessage("Only alphanumericals, dots, dashes and underscores")},ie.isDuplicateType=i.observable(!1),ie.duplicateConstraintMessage=i.observable("Duplicate constraint"),ie.pictureURLValue=i.observable(""),ie.isPictureURLInvalid=i.observable(!1),ie.validatePictureURL=function(e){ie.isPictureURLInvalid(!1)},ie.showNewFileName=i.observable(),ie.showEditedInfo=i.observable(),ie.showDecisionInfo=i.observable(),ie.decisionInputPicture=i.observable(),ie.decisionEndsPicture=i.observable(),ie.isNodeNameInvalid=i.observable(!1),ie.newNodeNameValue=i.observable(""),ie.invalidNameMessage=i.observable(""),ie.resetDecisionIndices=function(){ie.updateTrigger(!ie.updateTrigger()),m.resetCurrentIndices(),ie.decisionInputPicture(m.getCurrentInputPicture()),ie.decisionEndsPicture(m.getCurrentEndsPicture())},ie.btnFlowH2click=function(){r.getDiagramType()!=d.diagramType().ERD_DB&&r.getDiagramType()!=d.diagramType().ERD_LOG&&ie.changeFlowDirection(d.flow().VERTICAL)},ie.btnFlowV2click=function(){r.getDiagramType()!=d.diagramType().ERD_DB&&r.getDiagramType()!=d.diagramType().ERD_LOG&&ie.changeFlowDirection(d.flow().HORIZONTAL)},ie.changeFlowDirection=function(e){q(e)};var qe=!1;ie.hasFlowDirectionChange=function(){return qe},ie.setFlowDirectionChange=function(){qe=!0},ie.resetFlowDirectionChange=function(){qe=!1},ie.isHorizontal=i.observable(!1),ie.layoutModeText=i.observable(r.getLayoutModeText()),ie.diagramModeText=i.observable(r.getDiagramModeText());var je=e("#shutdownId"),Je=e("#menuId"),Xe=e("#newId"),$e=e("#openId"),Qe=e("#templateId"),et=e("#inOutId"),tt=e("#undoId"),at=e("#redoId"),it=e("#deleteId"),ot=e("#copyId"),nt=e("#pasteId"),st=e("#saveId"),rt=e("#saveAsId"),lt=e("#refreshId"),dt=e("#findId"),ct=e("#clearId"),gt=e("#leftId"),ut=e("#rightId"),bt=e("#configId"),mt=e("#helpId"),pt=(e("#btnFlowVId"),e("#btnThumbnailId"),e("#screenId")),vt=e("#navbarId"),Tt=e("#topContainerId"),ft=e("#toolbarHId"),It=e("#leftColumnId"),ht=e("#toolbarVId"),Dt=e("#tbVButtonId"),yt=e("#startHereId"),wt=588,Ct=36;ie.updateWindow=function(e){ie.updateTrigger(!ie.updateTrigger()),ie.isHorizontal(r.getFlowDirection()===d.flow().HORIZONTAL),ie.layoutModeText(r.getLayoutModeText()),ie.diagramModeText(r.getDiagramModeText());var t=!r.isEditMode();s.updateMenus(ie),je.attr("disabled",!ie.isConnectionOK()),Xe.attr("disabled",!ie.isConnectionOK()),$e.attr("disabled",!ie.isConnectionOK()),Qe.attr("disabled",!ie.isConnectionOK()),et.attr("disabled",r.getDiagramType()!==d.diagramType().ERD_DB||ie.startHereVisible()||ie.isStartPage()||ie.manager.isTemplate()||ie.manager.isDirty()),tt.attr("disabled",t||!ie.manager.canUndo()).attr("title",ie.manager.getUndoName()),at.attr("disabled",t||!ie.manager.canRedo()).attr("title",ie.manager.getRedoName()),it.attr("disabled",t||!ie.manager.getSelectionManager().hasSelections()),ot.attr("disabled",t||!ie.manager.canCopy()),nt.attr("disabled",t||!ie.manager.readyToPaste()),st.attr("disabled",t||!ie.isConnectionOK()||!ie.manager.isDirty()||ie.manager.isTemplate()),rt.attr("disabled",t||!ie.isConnectionOK()||ie.manager.getModelHandler().isDiagramEmpty()),lt.attr("disabled",!ie.isCanvasVisible()),dt.attr("disabled",!ie.isCanvasVisible()),ct.attr("disabled",t||!ie.isCanvasVisible()),gt.attr("disabled",!ie.manager.hasPreviousDiagram()),ut.attr("disabled",!ie.manager.hasNextDiagram()),"visible"!==document.getElementById("blockResizeId").style.visibility||we?we&&(document.getElementById("blockResizeId").style.visibility="hidden",we=!1):we=!0,"visible"!==document.getElementById("switchResizeId").style.visibility||Le?Le&&(document.getElementById("switchResizeId").style.visibility="hidden",Le=!1):Le=!0,ie.manager.isInitialResizeMode()&&ie.manager.getModelHandler().isDiagramEmpty()?(ce.attr("disabled",!1),ge.attr("disabled",!1)):(ce.attr("disabled",!0),ge.attr("disabled",!0)),ie.disableInactiveTypeButtons(!ie.manager.getModelHandler().isDiagramEmpty())},ie.initData=function(){ie.updateWindow()},ie.galleryFlowNodes=i.pureComputed(function(){return ie.updateTrigger(),r.getFlowDirection()===d.flow().HORIZONTAL?c.getFlowNodesH():c.getFlowNodesV()}),ie.galleryMiscNodes=i.pureComputed(function(){return ie.updateTrigger(),r.getFlowDirection()===d.flow().HORIZONTAL?c.getMiscNodesH():c.getMiscNodesV()}),ie.galleryERDNodes=i.pureComputed(function(){return ie.updateTrigger(),c.getERDNodes()}),ie.galleryLOGNodes=i.pureComputed(function(){return ie.updateTrigger(),c.getLOGNodes()}),ie.galleryProcNodes=i.pureComputed(function(){return ie.updateTrigger(),c.getProcNodes()}),ie.pageNodes=i.pureComputed(function(){ie.updateTrigger();for(var e=[],t=r.getFlowDirection()===d.flow().HORIZONTAL?c.getHPageItems():c.getVPageItems(),a=0;a<t.length;a++)e.push(t[a]);return e}),ie.diagramDisplayName=i.observable(fe),ie.setDiagramDisplayName=function(e){e&&e.length>0?(ie.showTemplatesOnly()&&(e=d.templateToken()+": "+e),ie.diagramDisplayName(e)):ie.diagramDisplayName(fe)},ie.taskActionInputValue=i.observable(""),ie.taskServiceInputValue=i.observable(""),ie.taskSubscribeInputValue=i.observable(""),ie.taskPublishInputValue=i.observable(""),ie.taskOperationInputValue=i.observable(""),ie.taskExpressionInputValue=i.observable(""),ie.showTaskAction=i.observable(!0),ie.showTaskService=i.observable(!0),ie.showTaskSubscribe=i.observable(!0),ie.showTaskPublish=i.observable(!0),ie.showTaskOperation=i.observable(!0),ie.showTaskExpression=i.observable(!0),ie.taskActionSelected=i.observable(!0),ie.taskServiceSelected=i.observable(!1),ie.taskSubscribeSelected=i.observable(!1),ie.taskPublishSelected=i.observable(!1),ie.taskOperationSelected=i.observable(!1),ie.taskExpressionSelected=i.observable(!1),ie.nodeActionList=i.observableArray(),ie.nodeOperationList=i.observableArray(),ie.nodeServiceList=i.observableArray(),ie.nodePublishList=i.observableArray(),ie.nodeSubscribeList=i.observableArray(),ie.showTaskEditorOnLeft=i.observable(!1),ie.aboutTitle=i.observable(""),ie.aboutVersion=i.observable(""),ie.aboutText=i.observable(""),ie.aboutSources=i.observable(""),ie.aboutCopyright=i.observable(""),ie.showAboutBox=function(t,a,i,o,n){ie.aboutTitle(t),ie.aboutVersion(a),ie.aboutText(i),ie.aboutSources(o),e("#aboutDialogId").dialog("open")},ie.welcomeTitle=i.observable(""),ie.welcomeGreeting=i.observable(""),ie.welcomeTo=i.observable(""),ie.welcomeTip=i.observable(""),ie.showWelcomeBox=function(t,a,i,o){ie.welcomeTitle(t),ie.welcomeGreeting(a),ie.welcomeTo(i),ie.welcomeTip(o),e("#welcomeDialogId").dialog("open")},ie.isStartPage=i.observable(!1);document.getElementById("startToTopBtn");ie.setStartPageOpen=function(e){ie.isStartPage(e)},ie.startTitle=i.observable(""),ie.startTopText1=i.observable(""),ie.startTopText2=i.observable(""),ie.startFlowTitle=i.observable(""),ie.startERDTitle=i.observable(""),ie.startLOGTitle=i.observable(""),ie.startProcessTitle=i.observable(""),ie.showStartPage=function(e,t,a,i,o,n,s){ie.startTitle(e),ie.startTopText1(t),ie.startTopText2(a),ie.startFlowTitle(i),ie.startERDTitle(o),ie.startLOGTitle(n),ie.startProcessTitle(s),ie.manager.getStartPageEditor().showStartPageEditor()},ie.callStartPage=function(t){var a=O.getTitle(),i=O.getTopText1(),o=O.getTopText2(),n=O.getFlowTitle(),s=O.getERDTitle(),r=O.getLOGTitle();procTitle=O.getProcessTitle(),ie.showDBName(!1),e("#thumbnailDialogId").dialog("close"),ie.getFlowManager().clearDiagram(),ie.getFlowManager().refreshDiagram(),vt.css("height","32px"),pt.css("grid-template-rows","40px 40px auto"),ie.showStartPage(a,i,o,n,s,r,procTitle)},ie.templatesList=i.observableArray([""]),ie.flowTemplates=i.observableArray(ie.manager.getTemplates().getFlowTemplatesList()),ie.dbTemplates=i.observableArray(),ie.logTemplates=i.observableArray(ie.manager.getTemplates().getLOGTemplatesList()),ie.procTemplates=i.observableArray(ie.manager.getTemplates().getPROCTemplatesList()),ie.showFlowTemplates=i.observable(r.getDiagramType()===d.diagramType().FLOWCHART),ie.showDBTemplates=i.observable(r.getDiagramType()===d.diagramType().ERD_DB),ie.showLOGTemplates=i.observable(r.getDiagramType()===d.diagramType().ERD_LOG),ie.showPROCTemplates=i.observable(r.getDiagramType()===d.diagramType().PROCESS),ie.hideTextBlock=i.observable(!1),ie.setHideTextBlock=function(){ie.hideTextBlock(!0)},ie.flowTabVisible=i.observable(),ie.erdTabVisible=i.observable(),ie.logTabVisible=i.observable(),ie.procTabVisible=i.observable(),ie.setFlowTabVisible=function(){ee(),ie.flowTabVisible(!0)},ie.setERDTabVisible=function(){ee(),ie.erdTabVisible(!0)},ie.setLOGTabVisible=function(){ee(),ie.logTabVisible(!0)},ie.setPROCTabVisible=function(){ee(),ie.procTabVisible(!0)},ie.infoMessage=i.observable(""),ie.infoMessageVisible=i.observable(),ie.showInfoMessage=function(t,a){ie.infoMessage(t),ie.infoMessageVisible(!1),e("#infoDialogId").dialog("open"),a&&e("#infoDialogId").dialog("option","title",a)},e("#infoDialogId").on("dialogopen",function(t,a){setTimeout(function(){ie.infoMessageVisible(!0),e("#infoTextId").scrollTop(0)},200)});var Et;ie.getConfirmSrvFlag=function(){return Et},ie.setConfirmSrvFlag=function(e){Et=e},ie.confirmSrvMessage=i.observable(""),ie.showConfirmSrvMessage=function(t,a,i){R.initDialog(ie.manager),ie.confirmSrvMessage(t),a&&me.dialog("option","title",a),i&&(e(e("button",me.parent())[1]).text(i.first),e(e("button",me.parent())[2]).text(i.second)),me.dialog("open")};var Nt;ie.getConfirmFlag=function(){return Nt},ie.setConfirmFlag=function(e){Nt=e},ie.confirmMessage=i.observable(""),ie.showConfirmMessage=function(t,a,i){k.initDialog(ie.manager),ie.confirmMessage(t),a&&ue.dialog("option","title",a),i&&(e(e("button",ue.parent())[1]).text(i.first),e(e("button",ue.parent())[2]).text(i.second)),ue.dialog("open")};var St;ie.getConfirmFlag2=function(){return St},ie.setConfirmFlag2=function(e){St=e},ie.confirmMessage2=i.observable(""),ie.showConfirmMessage2=function(t,a,i){M.initDialog(ie.manager),ie.confirmMessage2(t),a&&be.dialog("option","title",a),i&&(e(e("button",be.parent())[1]).text(i.first),e(e("button",be.parent())[2]).text(i.second)),be.dialog("open")},ie.isShowThumbnail=i.observable(),ie.btnThumbnailShow=function(){ie.isShowThumbnail(!0),e("#thumbnailDialogId").dialog("open"),ie.repaintDiagram()},ie.btnThumbnailHide=function(){ie.isShowThumbnail(!1),ie.repaintDiagram()},ie.overlayText=i.observable("");var xt=e("#saveOverlayId");ie.showOverlayMessage=function(e,t){var a=t||1e3;ie.overlayText(e),xt.show(),setTimeout(function(){xt.fadeOut(a)},a+200)},ie.bottomMessageText=i.observable("");var Lt=e("#bottomOverlayId");ie.showBottomMessage=function(e,t){var a=t||1e3;ie.bottomMessageText(e),Lt.show(),setTimeout(function(){Lt.fadeOut(a)},a+200)},pe.addEventListener("mousemove",function(e){te()},!1),pe.onchange=function(){te()};var Bt;ie.getDraggedPaletteId=function(){return Bt},ie.setDraggedPaletteId=function(e){Bt=e},ie.onPaletteDragStart=function(e){parseInt(e.target.id)===d.flowType().DB_TABLE_2||parseInt(e.target.id)===d.flowType().DB_TABLE_3||parseInt(e.target.id)===d.flowType().DB_TABLE_4?(Bt=d.flowType().DB_TABLE,e.dataTransfer.setData("text",d.flowType().DB_TABLE),e.dataTransfer.setData("altType",e.target.id)):parseInt(e.target.id)===d.flowType().ENTITY_W?(Bt=d.flowType().ENTITY,e.dataTransfer.setData("text",d.flowType().ENTITY),e.dataTransfer.setData("altType",e.target.id)):parseInt(e.target.id)===d.flowType().RELATION_W?(Bt=d.flowType().RELATION,e.dataTransfer.setData("text",d.flowType().RELATION),e.dataTransfer.setData("altType",e.target.id)):parseInt(e.target.id)===d.flowType().ATTR_MULTI||parseInt(e.target.id)===d.flowType().ATTR_DRV?(Bt=d.flowType().ATTRIBUTE,e.dataTransfer.setData("text",d.flowType().ATTRIBUTE),e.dataTransfer.setData("altType",e.target.id)):(Bt=e.target.id,e.dataTransfer.setData("text",e.target.id))},ie.onPaletteDragEnd=function(e){var t=oe.getBoundingClientRect();e.clientX>t.left&&e.clientX<t.right&&e.clientY>t.top&&e.clientY<t.bottom||ie.manager.getDnDHandler().resetDrag()},ie.requestFocus=function(){},ie.isControlPressed=function(){return Ie},ie.setControlPressed=function(e){Ie=e},ie.isEditControlPressed=function(){return De},ie.setEditControlPressed=function(e){De=e},ie.isShiftPressed=function(){return he},ie.setShiftPressed=function(e){he=e},window.onresize=function(){Te.style.height=window.innerHeight+"px",e("#thumbnailDialogId").dialog({position:{my:"right bottom",at:"right-8 bottom-6",of:window}}),ae();var t=document.getElementById("screenId").offsetWidth,a=e(window).scrollTop();t<wt?$(d.toolbarPosition().VERTICAL):a<Ct&&$(d.toolbarPosition().HORIZONTAL),ie.manager.getInlineInputEditor().relocateInlineFieldEditor(),ie.manager.getInlineAreaEditor().relocateInlineAreaEditor(),ie.manager.getDBTableEditor().relocateDBTableEditor(),ie.manager.getDBCardinalityEditor().relocateDBCardinalityEditor(),ie.manager.getDecisionLayoutEditor().relocateDecisionLayoutEditor(),C.relocateDialog(),te(),ie.repaintDiagram()},window.onscroll=function(){ie.manager.getInlineInputEditor().relocateInlineFieldEditor(),ie.manager.getInlineAreaEditor().relocateInlineAreaEditor(),ie.manager.getDBTableEditor().relocateDBTableEditor(),ie.manager.getDBCardinalityEditor().relocateDBCardinalityEditor(),Q(),e("#thumbnailDialogId").dialog({position:{my:"right bottom",at:"right-8 bottom-6",of:window}}),ie.repaintDiagram()};var Ot=0,Pt=e("#containerId");return ie.repaintDiagram=function(){ie.hideContainerBar(),ie.hideSwitchBar(),ie.manager.paintDiagram()},ie.initData(),{initFlowDemo:function(){window.scrollTo(0,0),ie.setProgressBarVisible(!1),o.checkConnection(ie.manager),setTimeout(function(){e(window).trigger("resize")},100)}}});